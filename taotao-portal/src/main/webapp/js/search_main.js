if (!window.console) {
    window.console = {};
    window.console.log = window.console.error = function() {
    }
}
if (!window.SEARCH) {
    window.SEARCH = {}
}
window.json_city = {"0": {"1": "鍖椾含","2": "涓婃捣","3": "澶╂触","4": "閲嶅簡","5": "娌冲寳","6": "灞辫タ","7": "娌冲崡","8": "杈藉畞","9": "鍚夋灄","10": "榛戦緳姹�,"11": "鍐呰挋鍙�,"12": "姹熻嫃","13": "灞变笢","14": "瀹夊窘","15": "娴欐睙","16": "绂忓缓","17": "婀栧寳","18": "婀栧崡","19": "骞夸笢","20": "骞胯タ","21": "姹熻タ","22": "鍥涘窛","23": "娴峰崡","24": "璐靛窞","25": "浜戝崡","26": "瑗胯棌","27": "闄曡タ","28": "鐢樿們","29": "闈掓捣","30": "瀹佸","31": "鏂扮枂","32": "鍙版咕","42": "棣欐腐","43": "婢抽棬","84": "閽撻奔宀�},"1": {"72": "鏈濋槼鍖�,"2800": "娴锋穩鍖�,"2801": "瑗垮煄鍖�,"2802": "涓滃煄鍖�,"2803": "宕囨枃鍖�,"2804": "瀹ｆ鍖�,"2805": "涓板彴鍖�,"2806": "鐭虫櫙灞卞尯","2807": "闂ㄥご娌�,"2808": "鎴垮北鍖�,"2809": "閫氬窞鍖�,"2810": "澶у叴鍖�,"2812": "椤轰箟鍖�,"2814": "鎬�煍鍖�,"2816": "瀵嗕簯鍖�,"2901": "鏄屽钩鍖�,"2953": "骞宠胺鍖�,"3065": "寤跺簡鍘�},"2": {"2813": "寰愭眹鍖�,"2815": "闀垮畞鍖�,"2817": "闈欏畨鍖�,"2820": "闂稿寳鍖�,"2822": "铏瑰彛鍖�,"2823": "鏉ㄦ郸鍖�,"2824": "瀹濆北鍖�,"2825": "闂佃鍖�,"2826": "鍢夊畾鍖�,"2830": "娴︿笢鏂板尯","2833": "闈掓郸鍖�,"2834": "鏉炬睙鍖�,"2835": "閲戝北鍖�,"2836": "鍗楁眹鍖�,"2837": "濂夎搐鍖�,"2841": "鏅檧鍖�,"2919": "宕囨槑鍘�,"78": "榛勬郸鍖�},"3": {"51035": "涓滀附鍖�,"51036": "鍜屽钩鍖�,"51037": "娌冲寳鍖�,"51038": "娌充笢鍖�,"51039": "娌宠タ鍖�,"51040": "绾㈡ˉ鍖�,"51041": "钃熷幙","51042": "闈欐捣鍘�,"51043": "鍗楀紑鍖�,"51044": "濉樻步鍖�,"51045": "瑗块潚鍖�,"51046": "姝︽竻鍖�,"51047": "娲ュ崡鍖�,"51048": "姹夋步鍖�,"51049": "澶ф腐鍖�,"51050": "鍖楄景鍖�,"51051": "瀹濆澔鍖�,"51052": "瀹佹渤鍘�},"4": {"113": "涓囧窞鍖�,"114": "娑櫟鍖�,"115": "姊佸钩鍘�,"119": "鍗楀窛鍖�,"123": "娼煎崡鍘�,"126": "澶ц冻鍖�,"128": "榛旀睙鍖�,"129": "姝﹂殕鍘�,"130": "涓伴兘鍘�,"131": "濂夎妭鍘�,"132": "寮�幙","133": "浜戦槼鍘�,"134": "蹇犲幙","135": "宸邯鍘�,"136": "宸北鍘�,"137": "鐭虫煴鍘�,"138": "褰按鍘�,"139": "鍨睙鍘�,"140": "閰夐槼鍘�,"141": "绉�北鍘�,"48131": "鐠у北鍘�,"48132": "鑽ｆ槍鍘�,"48133": "閾滄鍘�,"48201": "鍚堝窛鍖�,"48202": "宸村崡鍖�,"48203": "鍖楃鍖�,"48204": "姹熸触鍖�,"48205": "娓濆寳鍖�,"48206": "闀垮鍖�,"48207": "姘稿窛鍖�,"50950": "姹熷寳鍖�,"50951": "鍗楀哺鍖�,"50952": "涔濋緳鍧″尯","50953": "娌欏潽鍧濆尯","50954": "澶ф浮鍙ｅ尯","50995": "缍︽睙鍖�,"51026": "娓濅腑鍖�,"51027": "楂樻柊鍖�,"51028": "鍖楅儴鏂板尯","4164": "鍩庡彛鍘�,"3076": "楂樻柊鍖�},"5": {"142": "鐭冲搴勫競","148": "閭兏甯�,"164": "閭㈠彴甯�,"199": "淇濆畾甯�,"224": "寮犲鍙ｅ競","239": "鎵垮痉甯�,"248": "绉︾殗宀涘競","258": "鍞愬北甯�,"264": "娌у窞甯�,"274": "寤婂潑甯�,"275": "琛℃按甯�},"6": {"303": "澶師甯�,"309": "澶у悓甯�,"318": "闃虫硥甯�,"325": "鏅嬪煄甯�,"330": "鏈斿窞甯�,"336": "鏅嬩腑甯�,"350": "蹇诲窞甯�,"368": "鍚曟甯�,"379": "涓存本甯�,"398": "杩愬煄甯�,"3074": "闀挎不甯�},"7": {"412": "閮戝窞甯�,"420": "寮�皝甯�,"427": "娲涢槼甯�,"438": "骞抽《灞卞競","446": "鐒︿綔甯�,"454": "楣ゅ甯�,"458": "鏂颁埂甯�,"468": "瀹夐槼甯�,"475": "婵槼甯�,"482": "璁告槍甯�,"489": "婕渤甯�,"495": "涓夐棬宄″競","502": "鍗楅槼甯�,"517": "鍟嗕笜甯�,"527": "鍛ㄥ彛甯�,"538": "椹婚┈搴楀競","549": "淇￠槼甯�,"2780": "娴庢簮甯�},"8": {"560": "娌堥槼甯�,"573": "澶ц繛甯�,"579": "闉嶅北甯�,"584": "鎶氶『甯�,"589": "鏈邯甯�,"593": "涓逛笢甯�,"598": "閿﹀窞甯�,"604": "钁姦宀涘競","609": "钀ュ彛甯�,"613": "鐩橀敠甯�,"617": "闃滄柊甯�,"621": "杈介槼甯�,"632": "鏈濋槼甯�,"6858": "閾佸箔甯�},"9": {"639": "闀挎槬甯�,"644": "鍚夋灄甯�,"651": "鍥涘钩甯�,"2992": "杈芥簮甯�,"657": "閫氬寲甯�,"664": "鐧藉北甯�,"674": "鏉惧師甯�,"681": "鐧藉煄甯�,"687": "寤惰竟宸�},"10": {"727": "楣ゅ矖甯�,"731": "鍙岄腑灞卞競","737": "楦¤タ甯�,"742": "澶у簡甯�,"753": "浼婃槬甯�,"757": "鐗′腹姹熷競","765": "浣虫湪鏂競","773": "涓冨彴娌冲競","776": "榛戞渤甯�,"782": "缁ュ寲甯�,"793": "澶у叴瀹夊箔鍦板尯","698": "鍝堝皵婊ㄥ競","712": "榻愰綈鍝堝皵甯�},"11": {"799": "鍛煎拰娴╃壒甯�,"805": "鍖呭ご甯�,"810": "涔屾捣甯�,"812": "璧ゅ嘲甯�,"823": "涔屽叞瀵熷竷甯�,"835": "閿℃灄閮嫆鐩�,"848": "鍛间鸡璐濆皵甯�,"870": "閯傚皵澶氭柉甯�,"880": "宸村溅娣栧皵甯�,"891": "闃挎媺鍠勭洘","895": "鍏村畨鐩�,"902": "閫氳窘甯�},"12": {"904": "鍗椾含甯�,"911": "寰愬窞甯�,"919": "杩炰簯娓競","925": "娣畨甯�,"933": "瀹胯縼甯�,"939": "鐩愬煄甯�,"951": "鎵窞甯�,"959": "娉板窞甯�,"965": "鍗楅�甯�,"972": "闀囨睙甯�,"978": "甯稿窞甯�,"984": "鏃犻敗甯�,"988": "鑻忓窞甯�},"13": {"2900": "娴庡畞甯�,"1000": "娴庡崡甯�,"1007": "闈掑矝甯�,"1016": "娣勫崥甯�,"1022": "鏋ｅ簞甯�,"1025": "涓滆惀甯�,"1032": "娼嶅潑甯�,"1042": "鐑熷彴甯�,"1053": "濞佹捣甯�,"1058": "鑾辫姕甯�,"1060": "寰峰窞甯�,"1072": "涓存矀甯�,"1081": "鑱婂煄甯�,"1090": "婊ㄥ窞甯�,"1099": "鑿忔辰甯�,"1108": "鏃ョ収甯�,"1112": "娉板畨甯�},"14": {"1151": "榛勫北甯�,"1159": "婊佸窞甯�,"1167": "闃滈槼甯�,"1174": "浜冲窞甯�,"1180": "瀹垮窞甯�,"1201": "姹犲窞甯�,"1206": "鍏畨甯�,"2971": "瀹ｅ煄甯�,"1114": "閾滈櫟甯�,"1116": "鍚堣偉甯�,"1121": "娣崡甯�,"1124": "娣寳甯�,"1127": "鑺滄箹甯�,"1132": "铓屽煚甯�,"1137": "椹瀺灞卞競","1140": "瀹夊簡甯�},"15": {"1158": "瀹佹尝甯�,"1273": "琛㈠窞甯�,"1280": "涓芥按甯�,"1290": "鍙板窞甯�,"1298": "鑸熷北甯�,"1213": "鏉窞甯�,"1233": "娓╁窞甯�,"1243": "鍢夊叴甯�,"1250": "婀栧窞甯�,"1255": "缁嶅叴甯�,"1262": "閲戝崕甯�},"16": {"1303": "绂忓窞甯�,"1315": "鍘﹂棬甯�,"1317": "涓夋槑甯�,"1329": "鑾嗙敯甯�,"1332": "娉夊窞甯�,"1341": "婕冲窞甯�,"1352": "鍗楀钩甯�,"1362": "榫欏博甯�,"1370": "瀹佸痉甯�},"17": {"1432": "瀛濇劅甯�,"1441": "榛勫唸甯�,"1458": "鍜稿畞甯�,"1466": "鎭╂柦宸�,"1475": "閯傚窞甯�,"1477": "鑽嗛棬甯�,"1479": "闅忓窞甯�,"3154": "绁炲啘鏋舵灄鍖�,"1381": "姝︽眽甯�,"1387": "榛勭煶甯�,"1396": "瑗勯槼甯�,"1405": "鍗佸牥甯�,"1413": "鑽嗗窞甯�,"1421": "瀹滄槍甯�,"2922": "娼滄睙甯�,"2980": "澶╅棬甯�,"2983": "浠欐甯�},"18": {"4250": "鑰掗槼甯�,"1482": "闀挎矙甯�,"1488": "鏍床甯�,"1495": "婀樻江甯�,"1499": "闊跺北甯�,"1501": "琛￠槼甯�,"1511": "閭甸槼甯�,"1522": "宀抽槼甯�,"1530": "甯稿痉甯�,"1540": "寮犲鐣屽競","1544": "閮村窞甯�,"1555": "鐩婇槼甯�,"1560": "姘稿窞甯�,"1574": "鎬�寲甯�,"1586": "濞勫簳甯�,"1592": "婀樿タ宸�},"19": {"1601": "骞垮窞甯�,"1607": "娣卞湷甯�,"1609": "鐝犳捣甯�,"1611": "姹曞ご甯�,"1617": "闊跺叧甯�,"1627": "娌虫簮甯�,"1634": "姊呭窞甯�,"1709": "鎻槼甯�,"1643": "鎯犲窞甯�,"1650": "姹曞熬甯�,"1655": "涓滆帪甯�,"1657": "涓北甯�,"1659": "姹熼棬甯�,"1666": "浣涘北甯�,"1672": "闃虫睙甯�,"1677": "婀涙睙甯�,"1684": "鑼傚悕甯�,"1690": "鑲囧簡甯�,"1698": "浜戞诞甯�,"1704": "娓呰繙甯�,"1705": "娼窞甯�},"20": {"3168": "宕囧乏甯�,"1715": "鍗楀畞甯�,"1720": "鏌冲窞甯�,"1726": "妗傛灄甯�,"1740": "姊у窞甯�,"1746": "鍖楁捣甯�,"1749": "闃插煄娓競","1753": "閽﹀窞甯�,"1757": "璐垫腐甯�,"1761": "鐜夋灄甯�,"1792": "璐哄窞甯�,"1806": "鐧捐壊甯�,"1818": "娌虫睜甯�,"3044": "鏉ュ甯�},"21": {"1827": "鍗楁槍甯�,"1832": "鏅痉闀囧競","1836": "钀嶄埂甯�,"1842": "鏂颁綑甯�,"1845": "涔濇睙甯�,"1857": "楣版江甯�,"1861": "涓婇ザ甯�,"1874": "瀹滄槬甯�,"1885": "鎶氬窞甯�,"1898": "鍚夊畨甯�,"1911": "璧ｅ窞甯�},"22": {"2103": "鍑夊北宸�,"1930": "鎴愰兘甯�,"1946": "鑷础甯�,"1950": "鏀�灊鑺卞競","1954": "娉稿窞甯�,"1960": "缁甸槼甯�,"1962": "寰烽槼甯�,"1977": "骞垮厓甯�,"1983": "閬傚畞甯�,"1988": "鍐呮睙甯�,"1993": "涔愬北甯�,"2005": "瀹滃甯�,"2016": "骞垮畨甯�,"2022": "鍗楀厖甯�,"2033": "杈惧窞甯�,"2042": "宸翠腑甯�,"2047": "闆呭畨甯�,"2058": "鐪夊北甯�,"2065": "璧勯槼甯�,"2070": "闃垮潩宸�,"2084": "鐢樺瓬宸�},"23": {"3690": "涓変簹甯�,"3698": "鏂囨槍甯�,"3699": "浜旀寚灞卞競","3701": "涓撮珮鍘�,"3702": "婢勮繄鍘�,"3703": "瀹氬畨鍘�,"3704": "灞槍鍘�,"3705": "鏄屾睙鍘�,"3706": "鐧芥矙鍘�,"3707": "鐞间腑鍘�,"3708": "闄垫按鍘�,"3709": "淇濅涵鍘�,"3710": "涔愪笢鍘�,"3711": "涓夋矙甯�,"2121": "娴峰彛甯�,"3115": "鐞兼捣甯�,"3137": "涓囧畞甯�,"3173": "涓滄柟甯�,"3034": "鍎嬪窞甯�},"24": {"2144": "璐甸槼甯�,"2150": "鍏洏姘村競","2155": "閬典箟甯�,"2169": "閾滀粊甯�,"2180": "姣曡妭甯�,"2189": "瀹夐『甯�,"2196": "榛旇タ鍗楀窞","2205": "榛斾笢鍗楀窞","2222": "榛斿崡宸�},"25": {"4108": "杩簡宸�,"2235": "鏄嗘槑甯�,"2247": "鏇查潠甯�,"2258": "鐜夋邯甯�,"2270": "鏄�甯�,"2281": "鏅幢甯�,"2291": "涓存钵甯�,"2298": "淇濆北甯�,"2304": "涓芥睙甯�,"2309": "鏂囧北宸�,"2318": "绾㈡渤宸�,"2332": "瑗垮弻鐗堢撼宸�,"2336": "妤氶泟宸�,"2347": "澶х悊宸�,"2360": "寰峰畯宸�,"2366": "鎬掓睙宸�},"26": {"3970": "闃块噷鍦板尯","3971": "鏋楄姖鍦板尯","2951": "鎷夎惃甯�,"3107": "閭ｆ洸鍦板尯","3129": "灞卞崡鍦板尯","3138": "鏄岄兘鍦板尯","3144": "鏃ュ杸鍒欏湴鍖�},"27": {"2428": "寤跺畨甯�,"2442": "姹変腑甯�,"2454": "姒嗘灄甯�,"2468": "鍟嗘礇甯�,"2476": "瀹夊悍甯�,"2376": "瑗垮畨甯�,"2386": "閾滃窛甯�,"2390": "瀹濋浮甯�,"2402": "鍜搁槼甯�,"2416": "娓崡甯�},"28": {"2525": "搴嗛槼甯�,"2534": "闄囧崡甯�,"2544": "姝﹀▉甯�,"2549": "寮犳帠甯�,"2556": "閰掓硥甯�,"2564": "鐢樺崡宸�,"2573": "涓村宸�,"3080": "瀹氳タ甯�,"2487": "鍏板窞甯�,"2492": "閲戞槍甯�,"2495": "鐧介摱甯�,"2501": "澶╂按甯�,"2509": "鍢夊唱鍏冲競","2518": "骞冲噳甯�},"29": {"2580": "瑗垮畞甯�,"2585": "娴蜂笢鍦板尯","2592": "娴峰寳宸�,"2597": "榛勫崡宸�,"2603": "娴峰崡宸�,"2605": "鏋滄礇宸�,"2612": "鐜夋爲宸�,"2620": "娴疯タ宸�},"30": {"2628": "閾跺窛甯�,"2632": "鐭冲槾灞卞競","2637": "鍚村繝甯�,"2644": "鍥哄師甯�,"3071": "涓崼甯�},"31": {"4110": "浜斿娓犲競","4163": "鍗氬皵濉旀媺钂欏彜鑷不宸為樋鎷夊北鍙ｅ彛宀�,"15945": "闃挎媺灏斿競","15946": "鍥炬湪鑸掑厠甯�,"2652": "涔岄瞾鏈ㄩ綈甯�,"2654": "鍏嬫媺鐜涗緷甯�,"2656": "鐭虫渤瀛愬競","2658": "鍚愰瞾鐣湴鍖�,"2662": "鍝堝瘑鍦板尯","2666": "鍜岀敯鍦板尯","2675": "闃垮厠鑻忓湴鍖�,"2686": "鍠�粈鍦板尯","2699": "鍏嬪瓬鍕掕嫃宸�,"2704": "宸撮煶閮宸�,"2714": "鏄屽悏宸�,"2723": "鍗氬皵濉旀媺宸�,"2727": "浼婄妬宸�,"2736": "濉斿煄鍦板尯","2744": "闃垮嫆娉板湴鍖�},"32": {"2768": "鍙版咕甯�},"42": {"2754": "棣欐腐鐗瑰埆琛屾斂鍖�},"43": {"2770": "婢抽棬甯�},"84": {"1310": "閽撻奔宀�}};
Array.prototype.unique = function() {
    var d = [], c = {};
    for (var b = 0, a = this.length; b < a; b++) {
        if (!c[this[b]]) {
            d.push(this[b]);
            c[this[b]] = 1
        }
    }
    return d
};
SEARCH.util = {htmlspecialchars: function(a, b) {
        a = a.replace("<", "&lt;").replace(">", "&gt;").replace("&", "&amp;").replace('"', "&quot;");
        return b == true ? a.replace("'", "&#0*39;") : a
    },html_chars_decode: function(a) {
        return !a ? "" : a.replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&").replace(/&quot;/g, '"').replace(/&#0*39;/g, "'")
    },strip_tags: function(a, c) {
        c = (((c || "") + "").toLowerCase().match(/<[a-z][a-z0-9]*>/g) || []).join("");
        var b = /<\/?([a-z][a-z0-9]*)\b[^>]*>/gi, d = /<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi;
        return a.replace(d, "").replace(b, function(f, e) {
            return c.indexOf("<" + e.toLowerCase() + ">") > -1 ? f : ""
        })
    },getQueryString: function(b, a) {
        var c = new RegExp("(^|\\?|&)" + b + "=([^&]*)(\\s|&|$)", "i"), d = a ? a : window.location.search;
        if (c.test(d)) {
            return RegExp.$2
        }
        return ""
    },filtUrl: function(l, k, j) {
        var d, g, f;
        switch (arguments.length) {
            case 0:
                return "";
            case 1:
                d = window.location.pathname + window.location.search;
                g = l;
                f = "";
                break;
            case 2:
                d = l;
                g = k;
                f = "";
                break;
            case 3:
                d = l;
                g = k;
                f = j;
                break;
            default:
                break
        }
        var e = new RegExp("(^|\\?|&)" + g + "=([^&#]*)", "gi");
        if (!f) {
            return d.replace(e, "")
        } else {
            if (e.test(d)) {
                return d.replace(e, "$1" + g + "=" + f)
            } else {
                var i = d.indexOf("#"), h = "";
                if (i != -1) {
                    h = d.substr(i);
                    d = d.substr(0, i)
                }
                return d + "&" + g + "=" + f + h
            }
        }
    },get_ware_type: function(b) {
        var a = "general";
        switch (Math.floor(parseInt(b, 10) / 10000000)) {
            case 1:
                a = "book";
                break;
            case 2:
                a = "mvd";
                break;
            case 3:
                a = "ebook";
                break;
            case 6:
                a = "digital_music";
                break;
            case 185:
                a = "ehaoyao";
                break;
            default:
                break
        }
        return a
    },template: function(a, b) {
        if (typeof b != "object") {
            return ""
        }
        return a.replace(/{#(.*?)#}/g, function() {
            var c = arguments[1];
            if ("undefined" != typeof (b[c]) && b[c] != null) {
                return b[c]
            } else {
                return ""
            }
        })
    },sGetScript: function(b, e, d) {
        e = e || "GBK";
        var a = document.createElement("script");
        a.type = "text/javascript";
        a.charset = e;
        a.src = b;
        if (d == true) {
            a.async = true
        }
        var c = document.getElementsByTagName("head")[0];
        c.appendChild(a)
    },bind_attr_href: function(a, b) {
        var d = this, c = typeof (MS.selected_attr) == "undefined" ? $("#select,#filter") : $("#filter");
        c.unbind("click").bind("click", function(h) {
            var f = $(h.target), g = f.attr("href");
            if (!g) {
                f = f.parents("a");
                g = f.attr("href")
            }
            if (g && g != "javascript:;") {
                window.location.href = d.filtUrl(g, a, b);
                return false
            }
        })
    },setCookie: function(g, f, j) {
        var i = j, h = new Date;
        h.setTime(h.getTime() + 24 * i * 60 * 60 * 1000);
        document.cookie = g + "=" + escape(f) + ";expires=" + h.toGMTString() + ";path=/;domain=." + pageConfig.FN_getDomain()
    }};
$.extend({scriptsArray: [],delayLoad: function(g, a, b, k, c) {
        if (c !== undefined) {
            if ($(c).length == 0) {
                return false
            }
        }
        for (var f = 0, d = $.scriptsArray.length; f < d; f++) {
            if ($.scriptsArray[f] == a) {
                if (typeof (k) == "function") {
                    k()
                }
                return true
            }
        }
        var h = document.getElementsByTagName("head")[0], e;
        if (g) {
            e = document.createElement("script");
            e.type = "text/javascript";
            e.charset = b || "gbk";
            e.src = a
        } else {
            e = document.createElement("link");
            e.type = "text/css";
            e.rel = "stylesheet";
            e.href = a
        }
        e.onload = e.onreadystatechange = function() {
            if (!this.readyState || this.readyState === "loaded" || this.readyState === "complete") {
                $.scriptsArray.push(a);
                if (typeof (k) == "function") {
                    k()
                }
            }
        };
        h.appendChild(e);
        return false
    }});
(function(k, l) {
    k.QUERY_KEYWORD = l.util.html_chars_decode(k.QUERY_KEYWORD);
    k.REAL_KEYWORD = l.util.html_chars_decode(k.REAL_KEYWORD);
    //$("#key").val(k.QUERY_KEYWORD);
    if (typeof LogParm == "undefined") {
        LogParm = {ab: 0,result_count: 0}
    }
    LogParm.rec_type = LogParm.rec_type || "0";
    LogParm.ev = LogParm.ev || 0;
    LogParm.cid = LogParm.cid || "";
    LogParm.psort = LogParm.psort || "";
    LogParm.page = LogParm.page || "1";
    LogParm.sig = LogParm.sig || "";
    LogParm.rel_cat2 = LogParm.rel_cat2 || "";
    LogParm.rel_cat3 = LogParm.rel_cat3 || "";
    LogParm.log_id = LogParm.log_id || "";
    LogParm.expand = LogParm.expand || "";
    var d = $("#refilter");
    if (!d.length) {
        return false
    }
    var h = d.find("div.item"), g = d.find("a.more");
    var a = function(m) {
        for (var n = 10, j = h.length; n < j; n++) {
            if (!m) {
                $(h[n]).hide()
            } else {
                $(h[n]).show()
            }
        }
    };
    g.bind("click", function() {
        if (!$(this).attr("s") || $(this).attr("s") == null || $(this).attr("s") == "1") {
            $(this).html("<span>鏀惰捣</span><b class='close'></b>").attr({s: "0"});
            a(true)
        } else {
            $(this).html("<span>鏄剧ず鍏ㄩ儴鍒嗙被</span><b class='open'></b>").attr({s: "1"});
            a(false)
        }
    });
    d.find("h3").each(function() {
        $(this).click(function() {
            $(this).parent().toggleClass("hover").find(".show-more").toggleClass("hide")
        });
        var i = $(this).next("ul").children("li");
        if (i.not(":hidden").length == 0) {
            $(this).parent().find(".show-more").remove();
            i.css("display", "block")
        }
    });
    d.find("h3 a").click(function(i) {
        i.stopPropagation()
    });
    d.find(".show-more a").click(function() {
        $(this).parent().prev().find("li").css("display", "block");
        $(this).parent().remove()
    });
    if (l.list_category) {
        var f = l.list_category.split(";");
        for (var e = 0, c = f.length; e < c; e++) {
            var b = $("#category-2-" + f[e]).parents("div.item");
            b.addClass("hover").show();
            b.find("li").css("display", "block");
            b.find(".show-more").remove()
        }
    }
    l.cid_style()
})(window, SEARCH);
window.searchlog = function() {
    var k = Array.prototype.slice.call(arguments, 0), a, m = k[0] == 0 ? QUERY_KEYWORD : window.REAL_KEYWORD || QUERY_KEYWORD;
    var n = {sig: LogParm.sig,referer: document.referrer};
    if (k[0] == "e") {
        var g = encodeURIComponent(LogParm.ekey) + "^#psort#^#page#^#cid#^" + encodeURIComponent(window.location.href);
        k.shift();
        k.splice(4, 1, QUERY_KEYWORD);
        n.keyword = LogParm.ekey
    } else {
        var g = encodeURIComponent(m) + "^#psort#^#page#^#cid#^" + encodeURIComponent(window.location.href);
        n.keyword = m
    }
    var b = "http://sstat.jd.com/scslog?args=", c = k.length, l;
    if (c > 0) {
        if (k[0] == 0) {
            n.front_cost = LogParm.front_cost = LogParm.front_cost || "0";
            n.back_cost = LogParm.back_cost = LogParm.back_cost || "0";
            n.ip = LogParm.ip = LogParm.ip || "";
            n.rec_type = LogParm.rec_type;
            n.result_count = LogParm.result_count;
            a = b + LogParm.rec_type + "^" + g + "^^^" + LogParm.result_count + "^" + k[1] + "^" + LogParm.ev + "^" + LogParm.ab + "^" + LogParm.back_cost + "^" + LogParm.front_cost + "^" + LogParm.ip
        } else {
            if (k[0] == 1) {
                if (LogParm.rec_type != 10) {
                    a = b + "1^" + g + "^";
                    n.rec_type = 1
                } else {
                    a = b + "11^" + g + "^";
                    n.rec_type = 11
                }
                for (var d = 1, f = Math.min(5, c); d < f; d++) {
                    a += encodeURI(k[d]) + "^"
                }
                if (c > 3) {
                    if (k[3] == "51") {
                        LogParm.cid = k[1]
                    } else {
                        if (k[3] == "55") {
                            LogParm.psort = k[1]
                        } else {
                            if (k[3] == "56") {
                                LogParm.page = k[1]
                            } else {
                                n.wid = k[1]
                            }
                        }
                    }
                }
                if (c >= 5) {
                    n.word = k[4]
                }
                n.pos = k[2];
                n.type = k[3];
                for (var d = 0, f = (5 - c); d < f; d++) {
                    a += "^"
                }
                a += LogParm.ev + "^" + LogParm.ab
            }
        }
    }
    a = a.replace("#cid#", LogParm.cid);
    a = a.replace("#psort#", LogParm.psort);
    a = a.replace("#page#", LogParm.page);
    n.cid = LogParm.cid;
    n.sort = LogParm.psort;
    n.page = LogParm.page;
    n.ev = LogParm.ev;
    n.ab = LogParm.ab;
    if (k[0] == 0 && (LogParm.rec_type == "0" || LogParm.rec_type == "10")) {
        a += "^" + encodeURIComponent(document.referrer);
        l = encodeURIComponent(LogParm.expand)
    } else {
        a += "^^^^" + encodeURIComponent(document.referrer);
        l = encodeURIComponent(c >= 6 && k[5] != "" ? LogParm.expand + "$" + k[5] : LogParm.expand)
    }
    a += "^" + LogParm.rel_cat2 + "^" + LogParm.rel_cat3 + "^" + LogParm.log_id + "^" + l;
    $.getScript(a + "&sig=" + encodeURIComponent(LogParm.sig));
    try {
        JA.tracker.ngloader("search.000001", n)
    } catch (h) {
    }
};
$(document).ready(function() {
   // $("#key").val(QUERY_KEYWORD);
    //searchlog(0, SEARCH.track_iframe_onebox())
});
GS = window.GS || {};
GS.collocation = [{"鐖哥埜": ["鏄ヨ妭", "涓", "鏂板勾", "鐢熸棩"],"濡堝": ["鏄ヨ妭", "涓", "鏂板勾", "鐢熸棩"],"涓堝か": ["鏄ヨ妭", "涓", "鏂板勾", "鎯呬汉鑺�, "鐢熸棩"],"濡诲瓙": ["鏄ヨ妭", "涓", "鏂板勾", "鎯呬汉鑺�, "鐢熸棩"],"鐢锋湅鍙�: ["鏄ヨ妭", "涓", "鏂板勾", "鎯呬汉鑺�, "鐢熸棩"],"濂虫湅鍙�: ["鏄ヨ妭", "涓", "鏂板勾", "鎯呬汉鑺�, "鐢熸棩"],"鑰佷汉": ["鏄ヨ妭", "涓", "鏂板勾", "鐢熸棩"],"灏忓": ["鏄ヨ妭", "涓", "鏂板勾", "鐢熸棩"],"棰嗗": ["鏄ヨ妭", "涓", "鏂板勾", "鐢熸棩"]}, {"鏄ヨ妭": ["鐖哥埜", "濡堝", "涓堝か", "濡诲瓙", "鐢锋湅鍙�, "濂虫湅鍙�, "鑰佷汉", "灏忓", "棰嗗"],"涓": ["鐖哥埜", "濡堝", "涓堝か", "濡诲瓙", "鐢锋湅鍙�, "濂虫湅鍙�, "鑰佷汉", "灏忓", "棰嗗"],"鏂板勾": ["鐖哥埜", "濡堝", "涓堝か", "濡诲瓙", "鐢锋湅鍙�, "濂虫湅鍙�, "鑰佷汉", "灏忓", "棰嗗"],"鎯呬汉鑺�: ["涓堝か", "濡诲瓙", "鐢锋湅鍙�, "濂虫湅鍙�],"鐢熸棩": ["鐖哥埜", "濡堝", "涓堝か", "濡诲瓙", "鐢锋湅鍙�, "濂虫湅鍙�, "鑰佷汉", "灏忓", "棰嗗"]}, ["鏄ヨ妭", "涓", "鏂板勾", "鎯呬汉鑺�, "鐢熸棩"], ["鐖哥埜", "濡堝", "涓堝か", "濡诲瓙", "鐢锋湅鍙�, "濂虫湅鍙�, "鑰佷汉", "灏忓", "棰嗗"]];
GS.init = function() {
    this.obj = $("#dialogbox-gift").find("div.gift");
    if (this.obj.length == 0) {
        return false
    }
    var c = "";
    for (var b = 0, a = this.collocation[3].length; b < a; b++) {
        c += '<div><a href="javascript:;" onclick="GS.click(this)" title="' + this.collocation[3][b] + '">' + this.collocation[3][b] + "</a></div>"
    }
    this.obj.find("dl:eq(0) dd").html(c);
    c = "";
    for (var b = 0, a = this.collocation[2].length; b < a; b++) {
        c += '<div><a href="javascript:;" onclick="GS.click(this)" title="' + this.collocation[2][b] + '">' + this.collocation[2][b] + "</a></div>"
    }
    this.obj.find("dl:eq(1) dd").html(c);
    this.obj.children("a").bind("mouseenter", function() {
        if (GS.delytime) {
            clearTimeout(GS.delytime)
        }
        $(this).parent().addClass("hover")
    }).bind("mouseleave", function() {
        GS.delytime = setTimeout(function() {
            GS.obj.removeClass("hover")
        }, 500)
    }).next("div.prompt").bind("mouseenter", function() {
        clearTimeout(GS.delytime)
    }).bind("mouseleave", function() {
        $(this).parent().removeClass("hover")
    })
};
GS.click = function(b) {
    var a = this.obj.find("dl").index($(b).parents("dl"));
    if ($(b).hasClass("curr")) {
        $(b).removeClass("curr");
        this.html(this.collocation[a + 2], a)
    } else {
        $(b).addClass("curr").parent("div").siblings().find("a").removeClass("curr");
        this.html(this.collocation[a][$(b).html()], a)
    }
};
GS.html = function(a, c) {
    c = c === 0 ? 1 : 0;
    var e = "", g, h = this.obj.find("dl:eq(" + c + ")"), f = h.find("a.curr").html();
    for (var d = 0, b = a.length; d < b; d++) {
        if (f == a[d]) {
            g = "curr"
        } else {
            g = ""
        }
        e += '<div><a class="' + g + '" href="javascript:;" onclick="GS.click(this)" title="' + a[d] + '">' + a[d] + "</a></div>"
    }
    h.find("dd").html(e)
};
GS.search = function() {
    var a, b = this.obj.find("dl:eq(0) a.curr").html(), c = this.obj.find("dl:eq(1) a.curr").html();
    if (b && c) {
        a = "閫� + b + c + "绀肩墿"
    } else {
        if (b) {
            a = "閫� + b + "绀肩墿"
        } else {
            if (c) {
                a = c + "绀肩墿"
            } else {
                return false
            }
        }
    }
    this.obj.removeClass("hover");
    searchlog(1, 0, 0, 26);
    window.open("/Search?keyword=" + encodeURIComponent(a) + "&enc=utf-8")
};
SEARCH.iframe_click = {resolution: 200,iframes: [],interval: null,Iframe: function() {
        this.element = arguments[0];
        this.cb = arguments[1];
        this.hasTracked = false
    },track: function(b, a) {
        this.iframes.push(new this.Iframe(b, a));
        if (!this.interval) {
            var c = this;
            this.interval = setInterval(function() {
                c.checkClick()
            }, this.resolution)
        }
    },checkClick: function() {
        if (document.activeElement) {
            var b = document.activeElement;
            for (var a in this.iframes) {
                if (b === this.iframes[a].element) {
                    if (this.iframes[a].hasTracked == false) {
                        this.iframes[a].cb.apply(window, []);
                        this.iframes[a].hasTracked = true
                    }
                } else {
                    this.iframes[a].hasTracked = false
                }
            }
        }
    }};
SEARCH.track_iframe_onebox = function() {
    var e = this, d = $("#virtualWareIFrame"), b = /^http\:\/\/(.*)\.(jd|360buy)\.com/i, a = "", c = d.attr("src");
    if (d.length && b.test(c)) {
        a = RegExp.$1;
        if (a == "life" && c.indexOf("initRestaurant") > -1) {
            a = "dingzuo"
        } else {
            if (a == "life" && c.indexOf("initTakeOut") > -1) {
                a = "waimai"
            }
        }
        e.iframe_click.track(document.getElementById("virtualWareIFrame"), function() {
            searchlog(1, 0, 0, 59, a)
        })
    }
    return a
};
SEARCH.relate_search = {html: null,init: function() {
        if (this.html === null) {
            var a = QUERY_KEYWORD, b = this;
            $.ajax({url: "http://qpsearch.jd.com/relationalSearch?keyword=" + encodeURIComponent(a).toLocaleLowerCase(),async: true,scriptCharset: "utf-8",dataType: "jsonp",success: function(c) {
                    b.callback(c)
                }})
        } else {
            if (this.html == "") {
                $("#dialogbox-gift").hide()
            } else {
                $("#dialogbox-gift").append(this.html)
            }
        }
    },callback: function(e) {
        if ("string" == typeof (e) && e.length > 0) {
            var g = e.replace(/\*$/, "").split("*"), a = [];
            for (var f = 0, d = g.length; f < d; f++) {
                if ("" == g[f]) {
                    continue
                }
                a.push(g[f])
            }
            var h = '<div class="related-search"><span>鐩稿叧鎼滅储锛�/span>';
            for (var f = 0, d = Math.min(7, a.length); f < d; f++) {
                var b = a[f], c = f == 0 ? ' class="fore"' : "", k = f == d - 1 ? "" : "<b></b>";
                h += "<a onclick='searchlog(1, 0, " + f + ', 52, "' + b + "\");' href='Search?keyword=" + encodeURIComponent(b) + "&enc=utf-8'" + c + ">" + b + "</a>" + k
            }
            h += "</div>";
            $("#dialogbox-gift").append(h);
            this.html = h
        } else {
            $("#dialogbox-gift").hide();
            this.html = ""
        }
    }};
SEARCH.get_book_summary = {fragment: ['<div class="img"><img src="{img}" width="280" height="280" alt="" /></div><div class="text"><table cellpadding="0" cellspacing="0" border="0" width="100%">{detaile}</table></div>', '<div class="summary"><div class="i-summary"><div class="close" onclick="$(this).parent().parent().hide()"></div><div class="arrow"></div><div class="con"><div class="iloading">\u6b63\u5728\u52a0\u8f7d\u4e2d\uff0c\u8bf7\u7a0d\u5019...</div></div></div></div>', "<tr><td>{name}{value}</td></tr>"],dataUrl: "http://d.360buy.com/bookExt/get?skuId=",edataUrl: "http://e.jd.com/ebook/ExteBookService.aspx?stype=search&skuid=",setPosition: function(a) {
        var c = $(a.get(0)).position(), b = window.pageConfig.wideVersion ? 360 : 120;
        c.left > b && a.find(".summary").addClass("direct-left")
    },init: function() {
        var a = this;
        $("#plist").find("li.item-book").not('[done="1"]').each(function(b) {
            this.setAttribute("done", "1");
            var c = $(this);
            c.find("img").bind("mouseover", function() {
                if ($("#plist").hasClass("plist-book")) {
                    return
                }
                var g = c.attr("bookid");
                c.css({"z-index": 4});
                c.find(".summary").length == 1 && c.find(".summary").show();
                if (!g) {
                    return false
                } else {
                    c.append(a.fragment[1]);
                    a.setPosition(c);
                    c.removeAttr("bookid");
                    var d = c.find(".con");
                    var f = (c.attr("e-tag") == "1");
                    var e = (!f ? a.dataUrl : a.edataUrl) + g + "&callback=?";
                    $.getJSON(e, function(q) {
                        q = q || {};
                        if (!q.img) {
                            q.img = c.find("img").attr("src").replace("/n2/", "/n1/")
                        } else {
                            q.img = "http://img10.360buyimg.com/n1/" + q.img
                        }
                        var j = "";
                        var h = "";
                        var l = "";
                        var o = "";
                        var m = f ? $.trim(q.FileFormat) : "";
                        var p = q.Author ? $.trim(q.Author) + " 钁�" : "";
                        var k = q.Editer ? $.trim(q.Editer) + " 缂�" : "";
                        var n = q.Transfer ? $.trim(q.Transfer) + " 璇�" : "";
                        var i = q.Drawer ? $.trim(q.Drawer) + " 缁�" : "";
                        h = $.trim(p + k + n + i);
                        if (!h) {
                            h = "鏆傛棤"
                        }
                        if (m) {
                            if (m == "PDF" || m == "EXE" || m == "SWF" || m == "EPUB") {
                                l += '<b class="pc"></b>'
                            }
                            if (m == "EPUB" || m == "PDF") {
                                l += '<b class="iphone"></b><b class="ipad"></b>'
                            }
                            if (m == "APK" || m == "EPUB" || m == "PDF") {
                                l += '<b class="android"></b>'
                            }
                        }
                        if (h) {
                            o += a.fragment[2].replace("{name}", "浣溿�銆��锛�).replace("{value}", h)
                        }
                        if (q.Publishers) {
                            o += a.fragment[2].replace("{name}", "鍑�&nbsp;鐗�&nbsp;绀撅細").replace("{value}", q.Publishers)
                        }
                        if (q.PublishTime) {
                            o += a.fragment[2].replace("{name}", "鍑虹増鏃堕棿锛�).replace("{value}", q.PublishTime)
                        }
                        if (q.BatchNo > 0) {
                            o += a.fragment[2].replace("{name}", "鐗堛�銆�锛�).replace("{value}", q.BatchNo)
                        }
                        if (q.Pages) {
                            o += a.fragment[2].replace("{name}", "椤点�銆�暟锛�).replace("{value}", q.Pages)
                        }
                        if (q.PrintTime) {
                            o += a.fragment[2].replace("{name}", "鍗板埛鏃堕棿锛�).replace("{value}", q.PrintTime)
                        }
                        if (q.Format) {
                            o += a.fragment[2].replace("{name}", "寮��銆�湰锛�).replace("{value}", q.Format)
                        }
                        if (q.Papers) {
                            o += a.fragment[2].replace("{name}", "绾搞�銆�紶锛�).replace("{value}", q.Papers)
                        }
                        if (q.PrintNo > 0) {
                            o += a.fragment[2].replace("{name}", "鍗般�銆�暟锛�).replace("{value}", q.PrintNo)
                        }
                        if (q.WordCount > 0) {
                            o += a.fragment[2].replace("{name}", "瀛椼�銆�暟锛�).replace("{value}", q.WordCount)
                        }
                        if (m) {
                            o += a.fragment[2].replace("{name}", "鏂囦欢鏍煎紡锛�).replace("{value}", m)
                        }
                        if (q.ISBN) {
                            o += a.fragment[2].replace("{name}", "锛╋汲锛籍锛�).replace("{value}", q.ISBN)
                        }
                        if (q.FileSize > 0) {
                            o += a.fragment[2].replace("{name}", "鏂囦欢澶у皬锛�).replace("{value}", q.FileSize + "M")
                        }
                        if (l) {
                            o += a.fragment[2].replace("{name}", '<span class="carrier">\u652F\u6301\u8f7d\u4F53\uff1a</span>').replace("{value}", l)
                        }
                        j = a.fragment[0].replace(/\{img\}/, q.img).replace(/\{detaile\}/, o);
                        d.html(j)
                    })
                }
            }).bind("mouseout", function() {
                c.css({"z-index": 0}).find(".summary").hide()
            })
        })
    }};
SEARCH.get_shop_info = function(b, a) {
    if (b == "") {
        return
    } else {
        var c = this
    }
    $.ajax({url: "shop.php",data: {shop_id: b},dataType: "json",success: function(e) {
            if (typeof e != "object" || !e.name) {
                return
            }
            e.score = e.score || 0;
            e.full_score = (Math.floor(e.score * 10000) / 10000).toFixed(4);
            e.star = Math.round(14 * e.full_score);
            e.score = Math.floor(e.score * 100) / 100;
            e.visible = e.score > 0 ? "" : 'style="visibility:hidden"';
            e.score = e.score.toFixed(2);
            e.title = e.name;
            if (e.brief && e.brief.length > 20) {
                e.brief = e.brief.substr(0, 20) + "..."
            }
            if (!a) {
                e.name = window.pageConfig.wideVersion ? e.name.substr(0, 35) : e.name.substr(0, 20);
                var d = '<div class="store-logo"><a href="{#url#}" onclick="searchlog(1,' + b + ',0,58)" target="_blank"><img data-img="2" data-lazyload="{#logo#}"></a></div><div class="store-info"><h2><a href="{#url#}" title="{#title#}" onclick="searchlog(1,' + b + ',0,58)" target="_blank">{#name#}</a></h2><div class="shop-about">{#brief#}</div></div><div class="store-number" {#visible#}><dl><dd id="evaluate" title="{#full_score#}鍒�>{#evaluate#}</dd></dl></div><a href="{#url#}" class="go-store" onclick="searchlog(1,' + b + ',0,58)" target="_blank">杩涘叆搴楅摵</a>';
                var g = ((10 - e.full_score) * 10).toFixed(0);
                e.evaluate = '<em>鏈嶅姟璇勪环锛�/em><span class="grade"><em style="left:-' + g + 'px"></em></span> ' + (Math.floor(10 * e.full_score) / 10).toFixed(1) + "鍒�;
                d = c.util.template(d, e);
                if (d != "") {
                    $("#flagship-store").html(d).show()
                }
            } else {
                e.name = window.pageConfig.wideVersion ? e.name.substr(0, 14) : e.name.substr(0, 10);
                var f = $("#plist-shop").find('div[shop-id="' + b + '"] > .shop-info');
                if (e.logo) {
                    f.find(".shop-logo").html('<a href="' + e.url + '" title="' + e.title + '" target="_blank"><img data-img="2" width="135" height="45" data-lazyload="' + e.logo + '"></a>').show()
                } else {
                    f.find(".shop-logo").html('<a href="' + e.url + '" title="' + e.title + '" target="_blank"></a>').show()
                }
                f.find(".shop-sname a:eq(0)").html(e.name).attr({title: e.title,href: e.url}).parent().show();
                f.find(".phrase").html(e.brief).show();
                var g = ((10 - e.full_score) * 10).toFixed(0);
                f.find("dl.evaluate > dd").html('<span class="grade"><em style="left:-' + g + 'px"></em></span> ' + (Math.floor(10 * e.full_score) / 10).toFixed(1) + "鍒�).attr("title", e.full_score + "鍒�);
                if (e.visible) {
                    f.find("dl.evaluate").hide()
                } else {
                    f.find("em.evaluate-grade").find("strong").attr("title", e.full_score).find("a").html(e.score)
                }
                f.find("a.go-shop").attr("href", e.url)
            }
            $("img[data-lazyload]").Jlazyload({type: "image",placeholderClass: "err-product"})
        }})
};
SEARCH.get_multi_shops = function() {
    var b = this, a = $("#plist-shop");
    if (!a.length) {
        return false
    }
    a.find("div[shop-id]").not('[done="1"]').each(function() {
        this.setAttribute("done", "1");
        b.get_shop_info(this.getAttribute("shop-id"), true)
    })
};
SEARCH.get_im_info = function(a, b) {
    if (!a || !b) {
        return
    }
    $.ajax({url: "http://chat1.jd.com/api/checkChat?venderList=" + b,dataType: "jsonp",jsonp: "callback",scriptCharset: "utf-8",success: function(m) {
            if (typeof (m) != "object") {
                return
            }
            var d = {}, e = $("#store-selector").find(".text").text(), f = function(u, t, i) {
                var u = u == undefined ? "" : $.trim(u);
                var j = u.match(t), i = i == undefined ? 1 : i;
                return j === null ? "" : j[i]
            };
            for (var k = 0, h = m.length; k < h; k++) {
                d[m[k].shopId] = m[k]
            }
            for (var k = 0, h = a.length; k < h; k++) {
                var q = a.eq(k), s = d[q.attr("shop_id")], o = "", g = {};
                if (!s) {
                    continue
                }
                if (s.code == 1) {
                    o = '<i class="online" title="鑱旂郴瀹㈡湇"></i>'
                } else {
                    if (s.code == 3) {
                        o = '<i class="offline" title="瀹㈡湇鐣欒█"></i>'
                    }
                }
                var n = $.trim(q.siblings(".stocklist").find("span").html());
                n = n == "鏆備笉鏀寔閰嶉�" ? n : n.substr(n.length - 2);
                g.stock = e + "锛� + n + "锛�;
                g.pid = q.parent().parent().attr("sku");
                g.score = f(q.siblings(".extra").find("span.star-yellow").attr("class"), /star-yellow\s{1}h(\d+)/);
                g.evaluationRate = f(q.siblings(".extra").find("span.reputation").html(), /\((\d+)%濂借瘎\)/);
                g.commentNum = f(q.siblings(".extra").find("a").html(), /宸叉湁(\d+)浜鸿瘎浠�);
                var r = q.siblings(".p-img").find("img");
                var l = r.attr("src");
                if (l == undefined || l == "http://misc.360buyimg.com/lib/img/e/blank.gif") {
                    l = r.attr("data-lazyload")
                }
                g.imgUrl = f(l, /http\S+?\.com\/\w+?\/(\S+)/);
                g.wname = f(q.siblings(".p-name").find("a").html().replace(/<span[\s\S]+?<\/span>|<font class="skcolor_ljg">|<\/font>/g, ""), /([\s\S]+?)<font style="color:#ff0000"[\s\S]+/);
                g.advertiseWord = $.trim(q.siblings(".p-name").find("font.adwords").html());
                g.seller = $.trim(s.seller);
                g.venderId = s.venderId;
                g.entry = "jd_search";
                var c = "http://chat.jd.com/index.action?";
                for (var p in g) {
                    c += p + "=" + encodeURI(encodeURI(g[p])) + "&"
                }
                q.find("a").html(q.find("a").html() + o).find("i").click((function(i) {
                    return function() {
                        window.open(i);
                        return false
                    }
                })(c))
            }
        }})
};
SEARCH.get_shop_name = function() {
    var e = this, c = $("#plist").find("div.service,div.shop-name").not('[done="1"]').filter("[shop_id]"), d = c.length;
    if (!d) {
        return false
    }
    for (var b = 0, a = []; b < d; b++) {
        c[b].setAttribute("done", "1");
        a.push(c[b].getAttribute("shop_id"))
    }
    $.getJSON("ShopName.php", {ids: a.unique().join(",")}, function(n) {
        if (typeof n != "object") {
            return
        }
        var f = {}, g = [], m = $("#plist").find("ul.list-h").attr("tpl");
        for (var k = 0, h = n.length; k < h; k++) {
            f[n[k].id] = n[k]
        }
        for (var k = 0; k < d; k++) {
            var o = c.eq(k), p = f[o.attr("shop_id")];
            if (!p) {
                continue
            }
            if (m != "1") {
                var l = '<a target="_blank" onclick="searchlog(1,' + p.id + ',0,58)" href="' + p.url + '" title="' + p.title + '">' + p.title + "</a>";
                m == "2" && (l = "鐢�" + l + " 鍙戣揣");
                o.html(l);
                m == "3" && g.push($.trim(String(p.venderId)))
            }
        }
        e.get_im_info(c, g.unique().join(","))
    })
};
SEARCH.bind_events = {iplocation: (function(e, k) {
        var b = e("#store-selector");
        if (b.length == 0) {
            return function() {
            }
        }
        var n = '<div data-widget="tabs" class="m JD-stock" id="JD-stock"><div class="mt">    <ul class="tab">        <li data-index="0" data-widget="tab-item" class="curr"><a href="javascript:;" class="hover"><em>璇烽�鎷�/em><i></i></a></li>        <li data-index="1" data-widget="tab-item" style="display:none;"><a href="javascript:;" class=""><em>璇烽�鎷�/em><i></i></a></li>        <li data-index="2" data-widget="tab-item" style="display:none;"><a href="javascript:;" class=""><em>璇烽�鎷�/em><i></i></a></li>        <li data-index="3" data-widget="tab-item" style="display:none;"><a href="javascript:;" class=""><em>璇烽�鎷�/em><i></i></a></li>    </ul>    <div class="stock-line"></div></div><div class="mc" data-area="0" data-widget="tab-content">    <ul class="area-list">       <li><a href="javascript:;" data-value="1">鍖椾含</a></li><li><a href="javascript:;" data-value="2">涓婃捣</a></li><li><a href="javascript:;" data-value="3">澶╂触</a></li><li><a href="javascript:;" data-value="4">閲嶅簡</a></li><li><a href="javascript:;" data-value="5">娌冲寳</a></li><li><a href="javascript:;" data-value="6">灞辫タ</a></li><li><a href="javascript:;" data-value="7">娌冲崡</a></li><li><a href="javascript:;" data-value="8">杈藉畞</a></li><li><a href="javascript:;" data-value="9">鍚夋灄</a></li><li><a href="javascript:;" data-value="10">榛戦緳姹�/a></li><li><a href="javascript:;" data-value="11">鍐呰挋鍙�/a></li><li><a href="javascript:;" data-value="12">姹熻嫃</a></li><li><a href="javascript:;" data-value="13">灞变笢</a></li><li><a href="javascript:;" data-value="14">瀹夊窘</a></li><li><a href="javascript:;" data-value="15">娴欐睙</a></li><li><a href="javascript:;" data-value="16">绂忓缓</a></li><li><a href="javascript:;" data-value="17">婀栧寳</a></li><li><a href="javascript:;" data-value="18">婀栧崡</a></li><li><a href="javascript:;" data-value="19">骞夸笢</a></li><li><a href="javascript:;" data-value="20">骞胯タ</a></li><li><a href="javascript:;" data-value="21">姹熻タ</a></li><li><a href="javascript:;" data-value="22">鍥涘窛</a></li><li><a href="javascript:;" data-value="23">娴峰崡</a></li><li><a href="javascript:;" data-value="24">璐靛窞</a></li><li><a href="javascript:;" data-value="25">浜戝崡</a></li><li><a href="javascript:;" data-value="26">瑗胯棌</a></li><li><a href="javascript:;" data-value="27">闄曡タ</a></li><li><a href="javascript:;" data-value="28">鐢樿們</a></li><li><a href="javascript:;" data-value="29">闈掓捣</a></li><li><a href="javascript:;" data-value="30">瀹佸</a></li><li><a href="javascript:;" data-value="31">鏂扮枂</a></li><li><a href="javascript:;" data-value="32">鍙版咕</a></li><li><a href="javascript:;" data-value="42">棣欐腐</a></li><li><a href="javascript:;" data-value="43">婢抽棬</a></li><li><a href="javascript:;" data-value="84">閽撻奔宀�/a></li>    </ul></div><div class="mc" data-area="1" data-widget="tab-content"></div><div class="mc" data-area="2" data-widget="tab-content"></div><div class="mc" data-area="3" data-widget="tab-content"></div></div><span class="clr"></span>';
        b.children(".content").html(n);
        var g = b.find("li[data-widget]"), d = b.find('div[data-widget="tab-content"]'), h = 3, c = [], f = true, i;
        function j(q) {
            var p = c[q], o = c[q - 1] || 0;
            return k.json_city[o][p] || ""
        }
        function a(o) {
            e(d[o - 1]).hide();
            e(d[o]).html('<div class="iloading">姝ｅ湪鍔犺浇涓紝璇风◢鍊�..</div>').show()
        }
        function m(r, o, p, q) {
            if (!o) {
                return
            }
            c[r - 1] = o;
            if (k.json_city[o]) {
                l(k.json_city[o], r, p, q)
            } else {
                if (r < h) {
                    a(r);
                    k.getAreaList_callback = function(v) {
                        if (!v) {
                            return
                        }
                        var s = {};
                        for (var u = 0, t = v.length; u < t; u++) {
                            s[String(v[u]["id"])] = v[u]["name"]
                        }
                        k.json_city[String(o)] = s;
                        l(s, r, p, q)
                    };
                    e.getJSONP("http://d.jd.com/area/get?fid=" + o + "&callback=getAreaList_callback")
                } else {
                    l([], r, p, q)
                }
            }
        }
        function l(y, o, A, C) {
            if (!C && (!i[o] || "0" == i[o])) {
                for (var v in y) {
                    break
                }
                i[o] = v
            }
            var u = j(o - 1);
            if (o > 0) {
                e(g[o - 1]).find("a").attr("title", u);
                e(g[o - 1]).find("em").html(u.substr(0, 6))
            }
            if (o >= h) {
                var z = "", D = k.SEARCH;
                for (var v = 0; v < 4; v++) {
                    if (c[v]) {
                        z += c[v] + "-"
                    } else {
                        z += "0-"
                    }
                }
                D.util.setCookie("ipLoc-djd", z.substring(0, z.length - 1), 30);
                D.util.setCookie("ipLocation", k.json_city[0][c[0]], 30);
                if (C) {
                    b.removeClass("hover");
                    k.location.href = k.location.pathname + "?" + D.util.filtUrl(D.base_url, "stock") + "&psort=" + D.psort + "&" + Math.random() + "#filter";
                    return false
                }
                var x = "";
                for (var v = 0, t = 3, q = 0; v < t; v++) {
                    if (k.json_city[q] && c[v] && k.json_city[q][c[v]]) {
                        x += k.json_city[q][c[v]]
                    }
                    q = c[v]
                }
                x = x.substr(0, 13) + "<b/>";
                b.children(".text").html(x);
                return
            } else {
                e(d[o - 1]).hide();
                e(g[o - 1]).removeClass("curr")
            }
            var w = '<ul class="area-list">', r = "", B = "";
            for (var p in y) {
                y[p] = y[p].replace(" ", "");
                if (y[p].length > 12) {
                    B += "<li class='longer-area'><a href='javascript:;' data-value='" + p + "'>" + y[p] + "</a></li>"
                } else {
                    if (y[p].length > 5) {
                        r += "<li class='long-area'><a href='javascript:;' data-value='" + p + "'>" + y[p] + "</a></li>"
                    } else {
                        w += "<li><a href='javascript:;' data-value='" + p + "'>" + y[p] + "</a></li>"
                    }
                }
            }
            w += r + B + "</ul>";
            e(d[o]).html(w).show();
            e(g[o]).addClass("curr").show().find("em").html("璇烽�鎷�);
            if (A) {
                A()
            }
        }
        return function() {
            b = e("#store-selector");
            b.children(".content").html(n);
            g = b.find("li[data-widget]");
            d = b.find('div[data-widget="tab-content"]');
            c = [];
            f = true;
            d.click(function(q) {
                f = false;
                var p = e(q.srcElement || q.target), o = parseInt(p.attr("data-value"), 10);
                if (!o) {
                    return
                }
                m(parseInt(p.parent().parent().parent().attr("data-area")) + 1, o, "", 1);
                return false
            });
            g.click(function(q) {
                f = false;
                var p = e(this), r = parseInt(p.attr("data-index"));
                if (r >= h - 1) {
                    return
                }
                for (var o = r + 1; o < h; o++) {
                    e(g[o]).hide();
                    e(d[o]).hide()
                }
                e(g[r]).addClass("curr");
                e(d[r]).show();
                return false
            });
            i = (readCookie("ipLoc-djd") || "").split("-");
            if (!i[0] || !k.json_city[0][i[0]]) {
                i = ["1"]
            }
            m(1, i[0], (function() {
                var o = 1, p = function() {
                    o++;
                    m(o, i[o - 1], p)
                };
                return p
            })());
            b.mouseover(function() {
                b.addClass("hover")
            }).mouseout(function() {
                if (f) {
                    b.removeClass("hover")
                }
            })
        }
    })($, window),box_search: function() {
        var a = $("#box-search");
        if (!a.length) {
            return
        }
        $.get("hub.php?keyword=" + encodeURIComponent(QUERY_KEYWORD) + "&enc=utf-8", function(b) {
            if (!b) {
                return
            }
            $("#virtualWareIFrame").hide();
            a.after(b).remove();
            $("#complex-onebox").each(function() {
                var c = $(this);
                c.Jtab({compatible: true}, function() {
                    c.find("div.extra").find("a").hide().eq(arguments[2]).show()
                })
            })
        })
    },baby_info: function() {
        if ($("#babyQueryAttr").length == 1) {
            $.delayLoad(false, "http://misc.360buyimg.com/201007/skin/df/cal.css");
            $.delayLoad(true, "http://misc.360buyimg.com/product/js/2013/jQuery.Jcal.min.js", "gbk", SEARCH.get_baby_info)
        }
    },brandFolded: function() {
        if ($.browser.isIE6) {
            $("#select").find(".attr").eq(0).css("border-top", "none")
        }
        var g = $("#select").find("div.brand-attr");
        if (!g.length) {
            return
        }
        var j = $("#brand-search"), h = g.find("div.tabcon"), i = h.children("div"), c = h.hasClass("show-logo"), b = window.pageConfig.wideVersion ? c ? 14 : 15 : c ? 10 : 12, l = g.find("ul.tab"), f = "鍙悳绱㈡嫾闊炽�姹夊瓧鏌ユ壘鍝佺墝", d = false, e;
        i.slice(b).css("display", "none");
        c && i.mouseover(function() {
            $(this).addClass("hover")
        }).mouseout(function() {
            $(this).removeClass("hover")
        });
        if (i.length <= b) {
            return
        }
        function k(o, n) {
            o.addClass("curr").siblings().removeClass("curr");
            j.val(f);
            e = "";
            if (n == "0") {
                i.css("display", "block")
            } else {
                i.css("display", "none").filter("[rel='" + n + "']").css("display", "block")
            }
        }
        var a, m = window.SEARCH;
        l.mouseover(function(o) {
            var n = $(o.target).attr("rel");
            if (n == undefined || e) {
                return
            }
            if (a) {
                clearTimeout(a)
            }
            a = setTimeout(function() {
                k($(o.target), n)
            }, 150)
        }).mouseout(function(n) {
            a && clearTimeout(a)
        }).click(function(o) {
            var n = $(o.target).attr("rel");
            if (n == undefined) {
                return
            }
            k($(o.target), n)
        });
        g.find("span.o-more").click(function() {
            if (!d) {
                h.removeClass().addClass(c ? "tabcon tabcon-multi show-logo height185" : "tabcon tabcon-multi");
                j.parent().removeClass("hide");
                i.css("display", "block");
                l.show()
            } else {
                h.removeClass(c ? "tabcon-multi height185" : "tabcon-multi");
                j.parent().addClass("hide");
                i.slice(0, b).css("display", "block");
                i.slice(b).css("display", "none");
                l.hide().find("li").removeClass("curr").eq(0).addClass("curr")
            }
            d = !d
        });
        window.brand_search_result = function(p) {
            if (typeof p != "object") {
                return
            }
            i.css("display", "none");
            for (var o = 0, n = p.length; o < n; o++) {
                if (p[o].id) {
                    $("#brand_id_" + p[o].id).css("display", "block")
                }
            }
        };
        j.val(f).click(function() {
            if (this.value == f) {
                this.value = "";
                var n = l.find(".curr");
                if (n.attr("rel") != "0") {
                    n.removeClass("curr");
                    l.find("li[rel='0']").addClass("curr");
                    i.css("display", "block")
                }
            }
            searchlog(1, 0, 0, 49)
        }).blur(function() {
            if (this.value == "") {
                this.value = f
            }
        }).keyup(function(o) {
            if (o.keyCode == 13) {
                var n = h.find("div:visible");
                if (n.length == 1) {
                    window.location.href = n.find("a").attr("href");
                    return false
                }
            }
            var p = $.trim(this.value);
            if (p == e) {
                return
            }
            if (p != "") {
                m.util.sGetScript("http://bsearch.jd.com/?callback=brand_search_result&ids=" + m.brand_ids + "&key=" + encodeURIComponent(p), "UTF-8", true)
            } else {
                i.css("display", "block")
            }
            e = p
        })
    },handle_more_multi: function(f) {
        var a = $("div.prop-attrs[done!=1]:visible").not("#babyQueryAttr");
        a.each(function() {
            var h = $(this), j = h.find("li"), i = h.find("ul").width(), g = 0;
            j.each(function() {
                g += $(this).outerWidth(true)
            });
            i < g && h.find("span.o-more").removeClass("hide");
            j.length < 3 && h.find("span.o-multiple").addClass("hide");
            h.attr("done", 1)
        });
        if (!f) {
            var d = $("#select").find("div.brand-attr"), e, c, b;
            if (d.length) {
                e = d.find("div[rel]").length;
                b = d.find("div.tabcon").hasClass("show-logo");
                c = window.pageConfig.wideVersion ? b ? 14 : 15 : b ? 10 : 12;
                if (e < 3) {
                    d.find(".v-option").addClass("hide")
                } else {
                    if (e <= c) {
                        d.find(".o-more").addClass("hide")
                    }
                }
            }
        }
    },bind_more_multi: function() {
        $("span.o-more").click(function(b) {
            var a = $(this);
            a.toggleClass("fold");
            a.parent().prev().toggleClass("v-unfold");
            if (a.attr("class") == "o-more") {
                a.html("<b></b>鏇村")
            } else {
                a.html("<b></b>鏀惰捣")
            }
            if (b.hasOwnProperty("originalEvent")) {
                searchlog(1, 0, 0, 50)
            }
        });
        $("div.prop-attrs,div.color-attr").find("span.o-multiple").click(function(c) {
            $("#select").find("a.btn-gray:visible").not(".btn-price-range").click();
            var b = $(this), a = b.parents(".attr");
            b.parent().hide();
            a.addClass("attr-select");
            if (c.hasOwnProperty("originalEvent")) {
                searchlog(1, 0, 0, 24)
            }
        });
        $("div.brand-attr span.o-multiple").click(function(c) {
            $("#select").find("a.btn-gray:visible").not(".btn-price-range,.btn-submit,.tc-btn").click();
            var b = $(this), a = $("div.brand-attr");
            if (!a.find(".o-more").hasClass("fold")) {
                a.find(".o-more").click()
            }
            b.parent().hide();
            a.children().addClass("attr-select");
            a.find(".selected").removeClass("selected");
            a.find(".dd").html("");
            if (c.hasOwnProperty("originalEvent")) {
                searchlog(1, 0, 0, 24)
            }
        });
        $("a.btn-red").click(function() {
            if (!$(this).hasClass("disabled")) {
                searchlog(1, 0, 0, 25);
                window.location.href = window.location.pathname + "?" + MS.submit_url() + "#select"
            }
            return false
        });
        $("a.btn-gray").not(".btn-price-range").click(function(b) {
            var a = $(this), c = a.parents(".attr-select");
            c.find("a.curr").removeClass("curr");
            c.find(".selected").removeClass("selected");
            c.removeClass("attr-select").find("a.btn-red").addClass("disabled");
            delete MS.selected_attr;
            c.find(".v-option").show();
            if (c.find(".o-more").hasClass("fold")) {
                c.find(".o-more").click()
            }
            if (c.parent().hasClass("brand-attr")) {
                c.find(".s-brands").css("display", "none");
                c.find("li[rel]").removeClass("curr").eq(0).addClass("curr")
            }
            if (b.hasOwnProperty("originalEvent")) {
                searchlog(1, 0, 0, 24)
            }
            return false
        })
    },priceSelect: function() {
        var b = $("#select"), a = b.find("input.price-range");
        if (!a.length) {
            return
        }
        a.keypress(function(d) {
            var c = d.keyCode || d.charCode;
            if (c && (c < 48 || c > 57) && c != 46 && c != 8 && c != 37 && c != 39) {
                d.preventDefault()
            }
        }).blur(function(g) {
            var d = $(this), c = $.trim(d.val()), f = new RegExp("^[0-9]+(.[0-9]{2})?$", "g");
            if (!f.test(c)) {
                d.val("")
            }
            g.stopPropagation()
        });
        b.find("a.btn-price-range").click(function() {
            var f = a.eq(0).val(), c = a.eq(1).val(), d = $(this).attr("url");
            f = parseInt(f, 10);
            c = parseInt(c, 10);
            if (!isNaN(f) && !isNaN(c)) {
                if (f > c) {
                    var e = f;
                    f = c;
                    c = e
                }
                searchlog(1, 0, 0, 22, "浠锋牸::" + f + "-" + c);
                d = d.replace("min", f).replace("max", c)
            } else {
                if (!isNaN(f)) {
                    searchlog(1, 0, 0, 22, "浠锋牸::" + f + "gt");
                    d = d.replace("min", f).replace("-max", "gt")
                } else {
                    if (!isNaN(c)) {
                        searchlog(1, 0, 0, 22, "浠锋牸::0-" + c);
                        d = d.replace("min", 0).replace("max", c)
                    } else {
                        return false
                    }
                }
            }
            window.location.href = SEARCH.util.filtUrl(d, "psort", SEARCH.psort)
        })
    },viewTypeSelect: function() {
        var a = window.SEARCH;
        a.view_type = 2;
        if ($("#grid-unselected").hasClass("grid-curr")) {
            a.view_type = 2
        } else {
            if ($("#shop-unselected").hasClass("shop-curr")) {
                a.view_type = 3
            }
        }
        $("#list-unselected").click(function() {
            $(this).addClass("list-curr");
            $("#grid-unselected").removeClass("grid-curr").addClass("grid-unselected");
            $("#plist").addClass("plist-book");
            a.view_type = 1;
            a.util.bind_attr_href("vt", 1)
        });
        $("#grid-unselected").click(function() {
            $(this).addClass("grid-curr");
            $("#list-unselected").removeClass("list-curr").addClass("list-unselected");
            $("#plist").removeClass("plist-book");
            a.view_type = 2;
            a.util.bind_attr_href("vt", 2)
        })
    },reSearch: function() {
        var d = $("#text-stock-search"), c = $("#btn-stock-search"), a = "鍦ㄧ粨鏋滀腑鎼滅储";
        function b() {
            if ($.trim(d.val()) != "" && $.trim(d.val()) != a) {
                searchlog(1, 0, 0, 27);
                window.location.href = c.attr("url") + encodeURIComponent($.trim(d.val())) + "#filter";
                return false
            }
        }
        d.focus(function() {
            if ($.trim(d.val()) == a) {
                d.val("")
            }
        }).blur(function() {
            if ($.trim(d.val()) == "") {
                d.val(a)
            }
        }).keydown(function(f) {
            if (f.keyCode == 13) {
                b()
            }
        });
        c.click(function() {
            b()
        })
    },init: function() {
        for (var a in this) {
            a != "init" && this[a]()
        }
        GS.init()
    }};
SEARCH.top_page_html = function(d, e, g, b) {
    if (b) {
        this.page_num = d;
        d = Math.ceil(d / 2);
        e = Math.ceil(e / 2);
        var a = 2 * d - 3, f = 2 * d + 1
    } else {
        var a = d - 1, f = d + 1
    }
    var c = '<span class="text"><i>' + d + "</i>/" + e + "</span>";
    if (d <= 1) {
        c += '<span class="prev-disabled">涓婁竴椤�b></b></span>'
    } else {
        c += '<a onclick="SEARCH.page(' + a + ')" href="javascript:;" class="prev" title="浣跨敤鏂瑰悜閿乏閿篃鍙炕鍒颁笂涓�〉鍝︼紒">涓婁竴椤�b></b></a>'
    }
    if (d >= e) {
        c += '<span class="next-disabled">涓嬩竴椤�b></b></span>'
    } else {
        c += '<a onclick="SEARCH.page(' + f + ')" href="javascript:;" class="next" title="浣跨敤鏂瑰悜閿彸閿篃鍙炕鍒颁笅涓�〉鍝︼紒">涓嬩竴椤�b></b></a>'
    }
    $("#top_pagi").html(c);
    $("#res_count").html(g)
};
SEARCH.bottom_page_html = function(e, k, j) {
    if (j) {
        this.page_num = e;
        e = Math.ceil(e / 2);
        k = Math.ceil(k / 2);
        var d = 2 * e - 3, g = 2 * e + 1
    } else {
        var d = e - 1, g = e + 1
    }
    if (k < 0) {
        return ""
    }
    var a = e - 2, b = Math.min(k, e + 2), f = "";
    if (b < 7) {
        b = Math.min(7, k)
    } else {
        a = b - 4
    }
    if (e <= 1) {
        f += '<span class="prev-disabled">涓婁竴椤�b></b></span>'
    } else {
        f += '<a onclick="SEARCH.page(' + d + ', true)" href="javascript:;" class="prev" title="浣跨敤鏂瑰悜閿乏閿篃鍙炕鍒颁笂涓�〉鍝︼紒">涓婁竴椤�b></b></a>'
    }
    for (var h = 1; h <= k; h++) {
        if (h <= 2 || h >= a && h <= b) {
            f += h == e ? '<a href="javascript:;" class="current">' + h + "</a>" : '<a onclick="SEARCH.page(' + (j ? 2 * h - 1 : h) + ', true)" href="javascript:;">' + h + "</a>"
        } else {
            if (h < a) {
                f += '<span class="text">鈥�/span>';
                h = a - 1
            } else {
                if (h > b) {
                    f += '<span class="text">鈥�/span>';
                    break
                }
            }
        }
    }
    if (e >= k) {
        f += '<span class="next-disabled">涓嬩竴椤�b></b></span>'
    } else {
        f += '<a onclick="SEARCH.page(' + g + ', true)" href="javascript:;" class="next" title="浣跨敤鏂瑰悜閿彸閿篃鍙炕鍒颁笅涓�〉鍝︼紒">涓嬩竴椤�b></b></a>'
    }
    f += '<span class="page-skip"><em>&nbsp;&nbsp;鍏� + k + '椤�nbsp;&nbsp;&nbsp;&nbsp;鍒扮</em><input class="jumpto" type="text" value="' + e + '" onkeydown="javascript:if(event.keyCode==13){SEARCH.page_jump(' + k + "," + j + ');return false;}"/><em>椤�/em><a class="btn-skipsearch" value="纭畾" onclick="SEARCH.page_jump(' + k + "," + j + ')" href="javascript:;">纭畾</a></span>';
    $("#pagin-btm").html(f)
};
SEARCH.page = function(b, a) {
    b = parseInt(b, 10);
    if (b < 1) {
        b = 1
    }
    window.location = "http://www.taotao.com/search.html?q="+SEARCH.query+"&page="+b;
//    if (a) {
//        window.scrollTo(0, $("#filter").offset().top)
//    }
   // searchlog(1, b, 0, 56)
};
SEARCH.page_jump = function(b, a) {
    var c = parseInt($("#pagin-btm .jumpto").val(), 10);
    if (isNaN(c)) {
        c = 1
    }
    if (c > b) {
        c = b
    }
    return a ? this.page(2 * c - 1, true) : this.page(c, true), false
};
SEARCH.sort_html = function(c) {
    c = c || "";
    if (c == "0") {
        c = ""
    }
    var b = "<dt>鎺掑簭锛�/dt>", a = '<dd class="#class#"><a href="javascript:;" onclick="#click#">#name#</a><b></b></dd>', d = class_name = "";
    if (c == "") {
        class_name = "curr"
    } else {
        d = "SEARCH.sort('')"
    }
    b += a.replace("#class#", class_name).replace("#click#", d).replace("#name#", "鐩稿叧搴�);
    class_name = d = "";
    if (c == "3") {
        class_name = "curr down"
    } else {
        d = "SEARCH.sort('3')"
    }
    b += a.replace("#class#", class_name).replace("#click#", d).replace("#name#", "閿�噺");
    if (c == "2") {
        class_name = "price curr up";
        d = "SEARCH.sort('1')"
    } else {
        if (c == "1") {
            class_name = "price curr down";
            d = "SEARCH.sort('2')"
        } else {
            class_name = "";
            d = "SEARCH.sort('2')"
        }
    }
    b += a.replace("#class#", class_name).replace("#click#", d).replace("#name#", "浠锋牸");
    class_name = d = "";
    if (c == "4") {
        class_name = "curr"
    } else {
        d = "SEARCH.sort('4')"
    }
    b += a.replace("#class#", class_name).replace("#click#", d).replace("#name#", "璇勮鏁�);
    if ($("#list-unselected").length > 0) {
        class_name = d = "";
        if (c == "6") {
            class_name = "curr"
        } else {
            d = "SEARCH.sort('6')"
        }
        b += a.replace("#class#", class_name).replace("#click#", d).replace("#name#", "鍑虹増鏃堕棿")
    } else {
        class_name = d = "";
        if (c == "5") {
            class_name = "curr"
        } else {
            d = "SEARCH.sort('5')"
        }
        b += a.replace("#class#", class_name).replace("#click#", d).replace("#name#", "涓婃灦鏃堕棿")
    }
    $("#filter").find("dl.order").html(b)
};
SEARCH.sort = function(a) {
    a = a || "";
    if (a == "0") {
        a = ""
    }
    window.location.hash = this.base_url + "&psort=" + a;
    searchlog(1, a, 0, 55);
    this.util.bind_attr_href("psort", a)
};
SEARCH.scroll = function() {
    var e = this.page_num + 1, d = $("#plist").find("ul.list-h").attr("tpl") + ($("#plist").hasClass("plist-n8") ? "_L" : "_M"), b = $("#scroll_loading"), f = b.attr("data-start"), a = b.attr("data-log-id");
    var c = "s.php?" + this.base_url + "&psort=" + this.psort + "&page=" + e + "&scrolling=y&start=" + f + "&log_id=" + a + "&tpl=" + d;
    this.load(c, true);
    searchlog(1, e, 0, 56)
};
SEARCH.load = function(b, a) {
    if (this.loading) {
        return false
    } else {
        this.loading = true
    }
    var f = this, e = $("#plist"), d = f.util.getQueryString("click", b), c = a ? 1 : d == f.click ? 2 : 3;
    if (c == 3) {
        b = f.util.filtUrl(b, "cs", "y");
        b = f.util.filtUrl(b, "vt", f.view_type == 3 ? "" : f.view_type);
        b = f.util.filtUrl(b, "psort", f.psort)
    } else {
        b = f.util.filtUrl(b, "cs");
        b = f.util.filtUrl(b, "vt", f.view_type)
    }
    $.ajax({url: b.replace(/[\s&]*$/g, ""),timeout: 10000,error: function() {
            if (c == 1) {
                $("#scroll_loading").find("div").html('<b></b>鍔犺浇澶辫触锛岃<a href="javascript:void(0)" onclick="SEARCH.load(\'' + b + '\', true)"><font color="blue">閲嶈瘯</font></a>')
            } else {
                $("#search_loading").find("div").css("background", "none").html("鍔犺浇澶辫触锛岃<a href=\"javascript:void(0)\" onclick=\"$('#search_loading').remove();SEARCH.load('" + b + '\', false);"><font color="blue">閲嶈瘯</font></a>')
            }
        },beforeSend: function() {
            if (c == 1) {
                $("#scroll_loading").find("div").html("<b></b>姝ｅ湪鍔犺浇涓紝璇风◢鍊�..").find("b").css("display", "block")
            } else {
                e.prepend('<div id="search_loading" class="loading-in"><div>姝ｅ湪鍔犺浇涓紝璇风◢鍊檦~</div></div><div class="clr"></div>');
                if (c == 3) {
                    $("#refilter").find("h2").html('<a href="' + f.top_url + '">鏌ョ湅鎵�湁绫荤洰</a>');
                    $("#refilter").find("h3 a, li").removeClass("curr");
                    d && $("#category-" + d).length && $("#category-" + d).offset().top > $(window).height() && window.scrollTo(0, $("#select").offset().top);
                    $("#shop-choice").html("").hide();
                    $("#ad_left").html("").hide()
                }
            }
        },success: function(h) {
            if (c == 1) {
                $("#scroll_loading").remove();
                var g = $("#plist-shop").length ? $("#plist-shop") : e.find("ul.list-h");
                g.append(h)
            } else {
                if (c == 2) {
                    e.html(h)
                } else {
                    $(".right-extra").html(h);
                    f.bind_events.init();
                    f.relate_search.init();
                    f.cid_style()
                }
            }
            f.success_js(c)
        },complete: function() {
            f.loading = false
        }})
};
SEARCH.success_js = function(a) {
    this.get_ware_info();
    this.get_multi_shops();
    this.image_scroll('#plist li:not([done="1"]) .p-scroll');
    pageConfig.FN_ImgError(document);
    $("img[data-lazyload]").Jlazyload({type: "image",placeholderClass: "err-product"});
    pageConfig.isInitContrast = false;
    pageConfig.FN_InitContrast();
    $.delayLoad(true, "script/digital_music_download.js?100.js", "utf-8", "", 'li[e-tag!="1"] a.free-download');
    a != 1 && searchlog(0, 0)
};
MS = window.MS || {};
MS.interval_time = 0;
MS.get_last_attr = function(b) {
    if (b) {
        var a = b.split("%40");
        return a[a.length - 2]
    } else {
        return ""
    }
};
MS.attr_click = function(h, c) {
    if ($(h).parents(".attr").hasClass("attr-select")) {
        var j = window.event || arguments.callee.caller.arguments[0];
        if (j.preventDefault) {
            j.preventDefault();
            j.stopPropagation()
        } else {
            j.returnValue = false;
            j.cancelBubble = true
        }
        var k, g, i = $(h), l = i.parents(".attr").parent();
        this.selected_attr = this.selected_attr || [0, {}];
        if (l.attr("class") == "color-attr") {
            k = i;
            g = "curr"
        } else {
            k = i.parent();
            g = "selected"
        }
        i.trigger("blur");
        var f = i.offset(), n = f.left - 50, m = f.top - 26;
        var b = $('<span id="max-notice" style="position:absolute;left:' + n + "px;top:" + m + 'px;z-index:100;border:1px solid #EDD28B;background:#FFFDEE;">宸茶秴杩囧彲閫夐�椤逛釜鏁版渶澶у�鍠斤紒</span>');
        if (k.hasClass(g)) {
            this.selected_attr[0]--;
            k.removeClass(g);
            if (i.parent().attr("rel")) {
                $("div.s-brands a").each(function() {
                    if ($(this).attr("title") == i.attr("title")) {
                        $(this).remove();
                        return false
                    }
                })
            }
            delete this.selected_attr[1][c]
        } else {
            if (this.selected_attr[0] >= 5) {
                if ($("#max-notice").is(":visible")) {
                    return false
                }
                b.prependTo("body");
                setTimeout(function() {
                    b.animate({opacity: 0}, 500, function() {
                        b.remove()
                    })
                }, 2000);
                return false
            } else {
                this.selected_attr[0]++;
                k.addClass(g);
                if (i.parent().attr("rel") && (i.parent().siblings().length > (window.pageConfig.wideVersion ? 30 : 24))) {
                    var a = '<a href="' + i.attr("href") + '" icon="' + i.parent().attr("id") + '" title="' + i.attr("title") + '" onclick="MS.selected_brand_click(this);return false;" data="' + c + '">' + i.text() + "</a>";
                    $("div.s-brands").css("display", "block").find(".dd").append(a)
                }
                this.selected_attr[1][c] = this.get_last_attr(SEARCH.util.getQueryString("ev", i.attr("href")))
            }
        }
        this.submit_style(l);
        var d = new Date().getTime();
        if (d - this.interval_time > 800) {
            $.get("WareCount.php?" + this.submit_url(), (function(e) {
                return function(o) {
                    if (MS.LastModified > e || !o) {
                        return
                    }
                    MS.LastModified = e;
                    b.html("褰撳墠閫夋嫨鏉′欢涓嬶紝绾︽湁" + o + "涓� + SEARCH.search_type).prependTo("body");
                    setTimeout(function() {
                        b.animate({opacity: 0}, 500, function() {
                            b.remove()
                        })
                    }, 2000)
                }
            })(d));
            this.interval_time = d
        }
    } else {
        searchlog(1, 0, 0, 71, c)
    }
};
MS.selected_brand_click = function(c) {
    var b = $(c), a = b.attr("data");
    b.remove();
    this.selected_attr[0]--;
    delete this.selected_attr[1][a];
    $("#" + b.attr("icon")).removeClass("selected");
    this.submit_style($("div.brand-attr"))
};
MS.submit_style = function(a) {
    if (this.selected_attr[0]) {
        a.find("a.btn-red").removeClass("disabled")
    } else {
        a.find("a.btn-red").addClass("disabled");
        if (a.hasClass("brand-attr")) {
            $("div.s-brands").css("display", "none")
        }
    }
};
MS.submit_url = function() {
    var e = "", d = "", c = window.SEARCH, b = c.util.filtUrl(c.base_url, "click");
    for (var a in this.selected_attr[1]) {
        if (this.selected_attr[1][a]) {
            d += this.selected_attr[1][a] + "%7C%7C"
        }
    }
    if (d) {
        var f = d.substring(0, d.indexOf("_") + 1);
        d = d.substring(0, d.lastIndexOf("%7C%7C")).replace(new RegExp(f, "g"), "");
        e += f + d + "%40"
    }
    b += "&psort=" + c.psort;
    b = c.util.filtUrl(b, "ev", c.util.getQueryString("ev", b) + e);
    b = c.util.filtUrl(b, "vt", c.view_type);
    return b
};
(function(a) {
    a.fn.imgScroll = function(b, e) {
        var d = {evtType: "click",visible: 1,direction: "x",next: "#next",prev: "#prev",disableClass: "disabled",disableClassPerfix: false,speed: 300,step: 1,showControl: false,width: null,height: null,navItems: false,navItmesWrapClass: "scroll-nav-wrap",navItemActivedClass: "current"};
        var c = a.extend(d, b);
        return this.each(function() {
            var s = a(this), v = s.find("ul").eq(0), f = v.find("li"), D = f.length, o = null, k = null, j = typeof c.next == "string" ? a(c.next) : c.next, h = typeof c.prev == "string" ? a(c.prev) : c.prev, y = 0, p = c.step, i = c.visible, G = Math.ceil((D - i) / p) + 1, x = c.direction, w = c.evtType, n = c.disableClass, E = c.disableClassPerfix ? "prev-" + n : n, F = c.disableClassPerfix ? "next-" + n : n, r = c.navItems, A = c.navItmesWrapClass, u = c.navItemActivedClass, t = false, q = true, C = (D - i) % p == 0;
            function B(H) {
                if (D >= p + i) {
                    h.addClass(E);
                    j.removeClass(F)
                } else {
                    j.addClass(F)
                }
                if (f.eq(0).css("float") !== "left") {
                    f.css("float", "left")
                }
                o = c.width || f.eq(0).outerWidth();
                k = c.height || f.eq(0).outerHeight();
                s.css({position: s.css("position") == "static" ? "relative" : s.css("position"),width: H == "x" ? o * i : o,height: H == "x" ? k : k * i,overflow: "hidden"});
                v.css({position: "absolute",width: H == "x" ? o * D : o,height: H == "x" ? k : k * D,top: 0,left: 0})
            }
            function m(H, I) {
                if (v.is(":animated")) {
                    return false
                }
                if (q && I || t && !I) {
                    return false
                } else {
                    H = I ? --y : ++y
                }
                v.animate(x == "x" ? {left: H >= (G - 1) ? -(D - i) * o : -H * p * o} : {top: H >= (G - 1) ? -(D - i) * k : -H * p * k}, b.speed, function() {
                    if (D - H * p <= i) {
                        j.addClass(F);
                        t = true
                    } else {
                        j.removeClass(F);
                        t = false
                    }
                    if (H <= 0) {
                        h.addClass(E);
                        q = true
                    } else {
                        h.removeClass(E);
                        q = false
                    }
                    if (r) {
                        z(H)
                    }
                    if (typeof e == "function") {
                        e.apply(s, [H, G, f.slice(H * p, H * p + i), f.slice(H * p + i - p, H * p + i)])
                    }
                })
            }
            function g(J, H) {
                var J = a('<div class="' + J + '"></div>');
                for (var I = 0; I < G; I++) {
                    J.append("<em " + (I == 0 ? " class=" + H : "") + ' title="' + (I + 1) + '">' + (I + 1) + "</em>")
                }
                s.after(J)
            }
            function z(H) {
                if (a("." + A).length > 0) {
                    a("." + A).find("em").removeClass(u).eq(H).addClass(u)
                }
            }
            function l() {
                h.unbind(w).bind(w, function() {
                    m(y, true)
                });
                j.unbind(w).bind(w, function() {
                    m(y, false)
                })
            }
            if (D > i && i >= p) {
                B(x);
                l();
                if (r) {
                    g(A, u)
                }
            } else {
                if (c.showControl) {
                    j.add(h).show()
                } else {
                    j.add(h).hide()
                }
                h.addClass(E);
                j.addClass(F)
            }
        })
    }
})(jQuery);
SEARCH.image_scroll = function(a) {
    var b = $("#plist").hasClass("plist-n2") ? "n2" : $("#plist").hasClass("plist-n8") ? "n8" : "n7";
    $(a).each(function() {
        var d = $(this).find(".p-scroll-wrap"), f = $(this).find(".p-scroll-prev"), e = $(this).find(".p-scroll-next"), c = $(this).find("li").length;
        if (c > 5) {
            f.css("display", "inline");
            e.css("display", "inline");
            d.imgScroll({visible: 5,showControl: false,next: e,prev: f})
        }
        d.find("img").each(function() {
            $(this).mouseover(function() {
                var k = $(this).attr("src"), l = $(this).attr("data-skuid");
                d.find("a").removeClass("curr");
                $(this).parent("a").addClass("curr");
                var j = $(this).parents("li").find(".p-img img").eq(0), i = $(this).parents("li").find(".p-img a").eq(0), h = $(this).parents("li").find(".p-name a").eq(0), g = $(this).parents("li").find(".product-follow a").eq(0);
                j.attr("src", k.replace(/\/n[95]\//, "/" + b + "/"));
                i.attr("href", i.attr("href").replace(/\/\d{6,}/, "/" + l));
                h.attr("href", h.attr("href").replace(/\/\d{6,}/, "/" + l));
                if (g.length > 0) {
                    g.attr("id", g.attr("id").replace(/coll\d{6,}/, "coll" + l))
                }
            })
        })
    });
    $("#plist.plist-" + b).not(".no-preview").find("ul.list-h>li").not('[done="1"]').hover(function() {
        $(this).addClass("hover").find(".product-follow,.shop-name").show();
        $(this).find(".item-wrap").addClass("item-hover")
    }, function() {
        $(this).removeClass("hover").find(".item-wrap").removeClass("item-hover");
        $(this).find(".product-follow,.shop-name").hide()
    }).attr("done", "1")
};
window.surveyShowIndex = 0;
function surveyShow() {
    var a = $.delayLoad(false, "survey/css/surveyShowWindow.css"), b = $.delayLoad(true, "survey/js/surveyShowWindow.js?20140826.js", "utf-8");
    if (surveyShowIndex === 0 && a && b) {
        surveyWindowShow()
    } else {
        if (surveyShowIndex == 1) {
            surveyWindowHide()
        }
    }
}
function ebook_download(b, a) {
    $.login({modal: true,complete: function(c) {
            if (c != null && c.IsAuthenticated != null && c.IsAuthenticated) {
                var d = "http://gw.e.jd.com/downrecord/downrecord_insert.action?ebookId=" + b + "&key=" + a + "&callback=?";
                $.getJSON(d, function(f) {
                    if (f.code == 1) {
                        var e = confirm("濡傛偍宸插畨瑁呬含涓淟eBook瀹㈡埛绔紝璇风偣鍑烩�纭畾鈥濊嚜鍔ㄥ惎鍔ㄥ鎴风\n濡傛偍灏氭湭瀹夎浜笢LeBook瀹㈡埛绔紝璇风偣鍑烩�鍙栨秷鈥濆皢寮曞鎮ㄥ厤璐瑰畨瑁呭鎴风");
                        if (e == true) {
                            window.location = "LEBK:///Bought"
                        } else {
                            if (confirm('濡傛灉鎮ㄦ病鏈夊畨瑁匧eBook瀹㈡埛绔紝璇风偣鍑�纭畾"鎸夐挳鍒颁含涓滅綉绔欎笅杞絓n濡傛灉鎮ㄤ笉闇�瀹夎锛岃鐐瑰嚮"鍙栨秷"鎸夐挳')) {
                                window.open("http://e.jd.com/ebook/lebook_pc.aspx")
                            }
                        }
                        return
                    } else {
                        alert(f.message)
                    }
                })
            }
        }})
}
SEARCH.get_digital_price = function(b, a) {
    $.getJSON("http://p.3.cn/prices/mgets?skuids=" + b + "&area=" + a.replace(/-/g, "_") + "&type=1&callback=?", function(c) {
        SEARCH.set_digital_price_data(c)
    })
};
SEARCH.get_ware_stock = function(b, a) {
    $.getJSON("http://search.jd.com/stock?skus=" + b.replace(/J_/g, "") + "&district=" + a.split("-").slice(0, 3).join("_") + "&callback=?", function(c) {
        SEARCH.set_ware_stock_data(c)
    })
};
SEARCH.get_prompt_adwords = function(a) {
    $.getJSON("http://ad.3.cn/ads/mgets?skuids=" + a.replace(/J_/g, "AD_") + "&callback=?", function(b) {
        SEARCH.set_prompt_adwords_data(b)
    })
};
SEARCH.get_prompt_flag = function(a) {
    $.getJSON("http://pf.3.cn/flags/mgets?skuids=" + a + "&callback=?", function(b) {
        SEARCH.set_prompt_flag_data(b)
    })
};
SEARCH.get_comment_nums = function(a, b) {
    $.getJSON("http://club.jd.com/clubservice/summary-m-" + a.replace(/J_/g, "") + ".html?callback=?", function(c) {
        SEARCH.set_comment_nums_data(c, b)
    })
};
SEARCH.get_presale_info = function() {
    if (!window._enable_presale) {
        return false
    }
    var d = $("#plist"), b = d.find('a[presale="1"]').not('[p-done="1"]');
    if (window._presale_interval) {
        clearInterval(_presale_interval)
    }
    if (b.length == 0) {
        return false
    }
    var f = d.find("ul.list-h").attr("tpl") == "1", e = false, a = function(h, g) {
        h = h.toString();
        return h.length >= g ? h : a("0" + h, g)
    }, c = function(j) {
        var h = Math.floor(j / 86400);
        j -= h * 86400;
        var g = Math.floor(j / 3600);
        j -= g * 3600;
        g = a(g, 2);
        var k = Math.floor(j / 60);
        j -= k * 60;
        k = a(k, 2);
        var i = a(j, 2);
        return h > 0 ? "鍓╀綑" + h + "澶� + g + "鏃� + k + "鍒� : "鍓╀綑" + g + "鏃� + k + "鍒� + i + "绉�
    };
    b.each(function() {
        this.setAttribute("p-done", "1");
        var h = $(this).parents("li"), g = h.attr("sku");
        if (!g) {
            return false
        }
        $.getJSON("http://soa.yushou.jd.com/yushoulistinfo.action?sku=" + g + "&callback=?", function(o) {
            if (typeof (o) != "object" || o.type == "1" || !o.ret) {
                return false
            }
            var q = o.ret, l = q.d;
            var n = q.s == "0" ? "鏈紑濮� : "棰勫敭涓�;
            var s = '<div class="prebuy-time" time="' + l + '"><div class="pt-bg"></div><i></i><span>' + n + "</span><em>" + c(l) + "</em></div>";
            h.find("div.p-img").find("a").append(s);
            if (q.cp) {
                h.find("div.p-price").find("strong").html("锟� + q.cp)
            }
            if (q.cc) {
                h.find("div.p-price").append('<i class="prebuy-num">锛堝凡鏈� + q.cc + "浜洪瀹氾級</i>")
            }
            if (q.t == "2" && q.sa) {
                var k = '<div clstag="" class="sp-stage clearfix">', r;
                for (var p = 0, m = q.sa.length; p < m; p++) {
                    r = "";
                    if (typeof (q.cs) != "undefined") {
                        if ((p + 1) < q.cs) {
                            r = " timeout"
                        } else {
                            if ((p + 1) == q.cs) {
                                r = " curr"
                            }
                        }
                    }
                    k += '<span class="item' + r + '"><a href="javascript:void(0)"><em>婊� + q.sa[p].c + "浜�/em>";
                    k += "<strong>锟� + q.sa[p].m + '</strong></a><i class="bottom"><em></em></i></span>'
                }
                k += "</div>";
                h.find("div.p-price").after(k)
            }
            if (f) {
                h.addClass("prebuy-item").hover(function() {
                    h.addClass("hover")
                }, function() {
                    h.removeClass("hover")
                });
                h.find("a[stock]").html("绔嬪嵆棰勫畾")
            }
            e = true
        })
    });
    window._presale_interval = setInterval(function() {
        if (e) {
            d.find("div.prebuy-time").each(function() {
                var g = $(this).attr("time");
                g = parseInt(g, 10) - 1;
                if (g) {
                    $(this).attr("time", g).find("em").html(c(g))
                } else {
                    $(this).remove()
                }
            })
        }
    }, 1000)
};
SEARCH.digital_music_summmary = function() {
    if ($("#list-unselected").length < 1) {
        return false
    }
    var a = "";
    $("#plist").find("div.p-summary").not('[done="1"]').each(function(b) {
        this.setAttribute("done", "1");
        var c = this.id.split("-")[1];
        if (c >= 60000000 && c < 70000000) {
            a += c + ","
        }
    });
    if (a) {
        $.ajax({url: "DigitalMusicSummary.php",cache: false,timeout: 5000,data: {ids: a},dataType: "json",success: function(c) {
                if (!c) {
                    return
                }
                for (var b in c) {
                    c[b] && $("#summary-" + b).html(c[b])
                }
            }})
    }
};
SEARCH.get_ware_info = function() {
    var b = [], a = readCookie("ipLoc-djd") || "";
    $("strong[class^='J_']").not('[done="1"]').each(function() {
        this.setAttribute("done", "1");
        b.push(this.className)
    });
    b = b.join(",");
    if (!b) {
        return
    }
    if (this.enable_merge_request) {
        this.get_ware_info_merge(b, a)
    } else {
        this.get_digital_price(b, a), this.get_ware_stock(b, a), this.get_prompt_adwords(b), this.get_prompt_flag(b), this.get_comment_nums(b)
    }
    this.get_shop_name(), this.digital_music_summmary(), this.get_book_summary.init(), this.get_presale_info()
};
SEARCH.set_digital_price_data = function(c) {
    if (typeof c == "object") {
        for (var b = 0, a = c.length, e = "", f = ""; b < a; b++) {
            if (c[b].p < 0) {
                e = "鏆傛棤鎶ヤ环";
                f = ""
            } else {
                if (c[b].p == 0) {
                    e = "鍏嶈垂";
                    f = ""
                } else {
                    e = "锟� + c[b].p;
                    f = c[b].m == undefined || c[b].m == "0" || parseFloat(c[b].p) >= parseFloat(c[b].m) ? "" : "锛� + (Math.ceil(c[b].p / c[b].m * 100) / 10).toFixed(1) + "鎶橈級"
                }
            }
            $("strong." + c[b].id).html(e).next("span.discount").html(f)
        }
    }
};
SEARCH.set_prompt_flag_data = function(e) {
    if (!e || typeof e !== "object") {
        return
    }
    for (var d = 0, a = e.length; d < a; d++) {
        var g = e[d], f = $("#p" + g.pid);
        f.prepend(b(g.pf, f.find("a").length))
    }
    function b(o, p) {
        if (!o || p == 2) {
            return
        }
        var j = [];
        for (var n = 0, h = o.length; n < h; n++) {
            switch (o[n]) {
                case 1:
                    j[2] = '<a class="pt1" title="鏈晢鍝佹鍦ㄩ檷浠烽攢鍞腑">鐩撮檷</a>';
                    break;
                case 5:
                    j[3] = '<a class="pt2" title="璐拱鏈晢鍝侀�璧犲搧">璧犲搧</a>';
                    break;
                case 3:
                    j[4] = '<a class="pt3" title="璐拱鏈晢鍝佽繑浼樻儬鍒�>杩斿埜</a>';
                    break;
                case 4:
                    j[5] = '<a class="pt4" title="璐拱鏈晢鍝侀�浜眴">閫佷含璞�/a>';
                    break;
                case 11:
                    j[1] = '<a class="pt4" title="浼氬憳鐗逛环">浼氬憳鐗逛环</a>';
                    break;
                case 22:
                    j[0] = '<a class="pt4" title="浜眴浼樻儬">浜眴浼樻儬</a>';
                    break;
                default:
                    break
            }
        }
        var m = [], k = 0, c = p == 1 ? 2 : 4;
        for (var n = 0; n < 6; n++) {
            if (j[n] && ++k <= c) {
                m.push(j[n])
            }
        }
        return m.join("")
    }
};
SEARCH.set_prompt_adwords_data = function(d) {
    if (!d) {
        return
    }
    for (var c = 0, a = d.length; c < a; c++) {
        var f = d[c].id || "", e = $("#" + f), b = SEARCH.util.strip_tags(d[c].ad);
        if (e.length && b !== "") {
            e.parent().attr("title", b);
            e.parents("li").find(".p-img>a").attr("title", b);
            e.html(b)
        }
    }
};
SEARCH.set_comment_nums_data = function(e, d) {
    if (typeof (e) != "object" || typeof (e.CommentsCount) != "object") {
        return false
    }
    if (typeof (d) == "undefined") {
        for (var c = 0, b = e.CommentsCount, a = b.length; c < a; c++) {
            if (typeof (b[c].CommentCount) != "undefined") {
                $("#comment-" + b[c].SkuId).html("宸叉湁" + b[c].CommentCount + "浜鸿瘎浠�)
            }
        }
    } else {
        for (var c = 0, b = e.CommentsCount, a = b.length; c < a; c++) {
            if (typeof (b[c].CommentCount) != "undefined") {
                $("#adv-comment-" + b[c].SkuId).html("宸叉湁" + b[c].CommentCount + "浜鸿瘎浠�);
                $("#adv-star-" + b[c].SkuId).attr("class", "star-yellow h" + b[c].AverageScore)
            }
        }
    }
};
SEARCH.set_ware_stock_data = function(n) {
    if (!n || typeof n != "object") {
        return
    }
    var a = $("a[stock]"), k = readCookie("ipLoc-djd") || "", j = k.split("-"), e = j[0] ? window.json_city[0][j[0]] : "", g = [];
    for (var h = 0, c = a.length; h < c; h++) {
        var p = a.eq(h), o = p.attr("stock"), b = n[o], m = null, d = "btn btn-nostore notice-store";
        if (!b) {
            continue
        } else {
            m = p.parent().siblings(".stocklist")
        }
        switch (b.stockvalue & 65535) {
            case 0:
            case 18:
            case 34:
                m && m.html('<span class="st34">' + e + "鏃犺揣</span>");
                if (p.attr("data-disable-notice") == "1") {
                    p.before('<a href="javascript:;" class="btn-buy disabled">鍔犲叆璐墿杞�/a>').remove()
                } else {
                    p.attr({href: "javascript:;","class": d,"data-type": 2,"data-sku": o,id: "store" + o}).removeAttr("target").html("<b></b>鍒拌揣閫氱煡");
                    var f = SEARCH.util.get_ware_type(o);
                    (f == "book" || f == "mvd") && g.push(o)
                }
                break;
            case 36:
                m && m.html('<span class="st36">' + e + "棰勫畾</span>");
                break;
            case 40:
                m && m.html('<span class="st40">' + e + "鏈夎揣 <b>涓嬪崟鍚�-6澶╁彂璐�/b></span>");
                break;
            default:
                break
        }
    }
    if (!g.length) {
        return
    }
    $.getJSON("WareStock.php?wids=" + g.join(","), function(q) {
        if (typeof q != "object") {
            return
        }
        for (var l in q) {
            q[l] == 0 && $("#store" + l).before('<a href="javascript:;" class="btn-buy disabled">鍔犲叆璐墿杞�/a>').remove()
        }
    })
};
SEARCH.apiArray = [];
SEARCH.apiArray[1] = ["priceValue", SEARCH.set_digital_price_data, SEARCH.get_digital_price, false];
SEARCH.apiArray[2] = ["prommTagValue", SEARCH.set_prompt_flag_data, SEARCH.get_prompt_flag, false];
SEARCH.apiArray[4] = ["ADValue", SEARCH.set_prompt_adwords_data, SEARCH.get_prompt_adwords, false];
SEARCH.apiArray[8] = ["summaryValue", SEARCH.set_comment_nums_data, SEARCH.get_comment_nums, false];
SEARCH.apiArray[16] = ["stockValue", SEARCH.set_ware_stock_data, SEARCH.get_ware_stock, false];
SEARCH.get_ware_info_merge = function(e, c) {
    var b = e.replace(/J_/g, ""), f = this;
    for (var d = 1, a = f.apiArray.length - 1; d <= a; d = d * 2) {
        f.apiArray[d][3] = false
    }
    $.getJSONP("http://search.jd.com/mergesearch?skuids=" + b + "&apiType=1,2,4,8,16&area=" + c.split("-").slice(0, 3).join("_") + "&callback=SEARCH.jsonpcallback");
    setTimeout(function() {
        for (var j = 1, h, g = f.apiArray.length - 1; j <= g; j = j * 2) {
            if (f.apiArray[j][3] == false) {
                f.apiArray[j][3] = true;
                h = f.apiArray[j][2];
                h(e, c)
            }
        }
    }, 1500)
};
SEARCH.jsonpcallback = function(c, e) {
    for (var d = 1, b, a = SEARCH.apiArray.length - 1; d <= a; d = d * 2) {
        if (SEARCH.apiArray[d][0] == c && e != undefined && SEARCH.apiArray[d][3] == false) {
            SEARCH.apiArray[d][3] = true;
            b = SEARCH.apiArray[d][1];
            b(e)
        }
    }
};
SEARCH.get_baby_info = function() {
    var j = $("#babyQueryAttr"), f, a = 0, c = "", h = "", i = j.find(".txt-birthday"), b = new Date(), e = window.SEARCH;
    if (!i.attr("data-init")) {
        i.Jcal({chosendate: (b.getMonth() + 1) + "/" + b.getDate() + "/" + b.getFullYear(),startdate: (b.getMonth() + 1) + "/" + b.getDate() + "/" + (b.getFullYear() - 14),enddate: (b.getMonth() + 1) + "/" + b.getDate() + "/" + (b.getFullYear() + 1),outputFormat: "{y}-{m}-{d}",zIndex: 10,x: 0,y: 0});
        i.attr("data-init", "1")
    }
    function d(p) {
        var p = new Date(p * 1), l = {tip: ""}, o, n;
        o = p < b ? p : b;
        n = p < b ? b : p;
        var r = n.getYear() - o.getYear(), k = n.getMonth() - o.getMonth(), q = n.getDate() - o.getDate();
        if (q < 0) {
            q += 30;
            k -= 1
        }
        if (k < 0) {
            k += 12;
            r -= 1
        }
        if (!r && !k && !q) {
            l = {tip: "鍗冲皢鍑虹敓",status: "now"}
        } else {
            if (p < b) {
                l.status = "past";
                if (r) {
                    l.tip = r + "宀� + (k ? k + "涓湀" : "")
                } else {
                    if (k) {
                        l.tip = k + "涓湀"
                    }
                    if (q) {
                        l.tip += q + "澶�
                    }
                }
            } else {
                l.status = "future";
                if (r) {
                    l.tip = r + "骞� + (k ? k + "涓湀" : "")
                } else {
                    if (k) {
                        l.tip = k + "涓湀"
                    }
                    if (q) {
                        l.tip += q + "澶�
                    }
                }
            }
        }
        if (l.status == "now") {
            j.find(".tc-info").html('鎮ㄧ殑瀹濆疂<strong>鍗冲皢鍑虹敓</strong>鍟︼紒<a href="javascript:;" class="tci-change" clstag="search|keycount|search|updatebabyinfo">[ 淇敼淇℃伅 ]</a>')
        } else {
            if (l.status == "past") {
                j.find(".tc-info").html("鎮ㄧ殑瀹濆疂宸茬粡<strong>" + l.tip + '</strong>鍟︼紒<a href="javascript:;" class="tci-change" clstag="search|keycount|search|updatebabyinfo">[ 淇敼淇℃伅 ]</a>')
            } else {
                if (l.status == "future") {
                    j.find(".tc-info").html("鎮ㄧ殑瀹濆疂鍗冲皢鍦�strong>" + l.tip + '</strong>鍚庡嚭鐢燂紒<a href="javascript:;" class="tci-change" clstag="search|keycount|search|updatebabyinfo">[ 淇敼淇℃伅 ]</a>')
                }
            }
        }
        j.find(".tc-info a").click(function() {
            j.find(".query-con").removeClass("hide");
            j.find(".tips-con").addClass("hide")
        });
        $("#babyQueryAttr").removeClass("hide")
    }
    function g(l, k) {
        var m = l + "-" + c + "-" + h + "-" + k;
        $.ajax({url: "http://uprofile.jd.com/u/baby/setinfo?babyinfo=" + m,async: true,dataType: "jsonp",success: function(o) {
                if (!o || o.flag != 2) {
                    alert("Joy,娌¤浣忔偍鐨勯�鎷�..");
                    return
                }
                d(l);
                j.find(".query-con").addClass("hide");
                j.find(".tips-con").removeClass("hide");
                if ($("#for_my_bb").hasClass("tc-btn-selected")) {
                    var n = e.util.filtUrl(SEARCH.base_url, "bb_info", l + "-" + k);
                    window.location.href = window.location.pathname + "?" + n
                }
            }})
    }
    $.ajax({url: "http://uprofile.jd.com/u/baby/getinfo?callback=?",async: true,dataType: "jsonp",success: function(l) {
            var l = l.babyinfo.split("-");
            if (!l || !l[0]) {
                j.removeClass("hide").find(".query-con").removeClass("hide");
                return
            }
            f = l[0];
            c = l[1];
            h = l[2];
            a = l[3] || 0;
            j.find(".tips-con").removeClass("hide");
            var k = new Date(f * 1);
            j.find(".query-con .txt-birthday").val(k.getFullYear() + "-" + (k.getMonth() + 1) + "-" + k.getDate());
            if (a == "1") {
                j.find(".query-con .boy").addClass("selected")
            }
            if (a == "2") {
                j.find(".query-con .girl").addClass("selected")
            }
            d(l[0])
        }});
    $("#for_my_bb").click(function() {
        var k = e.util.filtUrl(e.base_url, "bb_info", $(this).hasClass("tc-btn-selected") ? "" : f + "-" + a);
        window.location.href = window.location.pathname + "?" + k
    });
    j.find(".boy").click(function() {
        $(this).addClass("selected");
        j.find(".girl").removeClass("selected")
    });
    j.find(".girl").click(function() {
        $(this).addClass("selected");
        j.find(".boy").removeClass("selected")
    });
    j.find(".btn-submit").click(function() {
        var k = $.trim(j.find(".txt-birthday").val());
        if (!k) {
            alert("璇烽�鎷╁疂瀹濆嚭鐢熸棩鏈�);
            return
        }
        if (!/^(\d{4})-(\d{1,2})-(\d{1,2})$/.test(k)) {
            alert('Joy鐪嬩笉鎳傛偍鍐欑殑鏃ユ湡锛岃鎸夌収"骞�鏈�鏃�鏍煎紡涔﹀啓');
            return
        }
        f = new Date(RegExp.$1, RegExp.$2 - 1, RegExp.$3).getTime();
        if (j.find(".boy").hasClass("selected")) {
            a = 1
        }
        if (j.find(".girl").hasClass("selected")) {
            a = 2
        }
        jdModelCallCenter.settings.fn = function() {
            g(f, a)
        };
        $.getJSON("http://passport.jd.com/loginservice.aspx?method=Login&callback=?", function(l) {
            if (l && l.Identity && l.Identity.IsAuthenticated) {
                g(f, a)
            } else {
                jdModelCallCenter.login()
            }
        });
        $(".Jcalendar").remove()
    })
};
SEARCH.get_paipai_ware = function(c) {
    if (!c) {
        return
    }
    var d = this, b = encodeURIComponent(QUERY_KEYWORD), a = "http://se.paipai.com/comm_search?KeyWord=" + b + "&charSet=gbk&PTAG=12468." + c + ".6";
    $.ajax({url: "http://sse1.paipai.com/comm_json?charset=utf-8&dtype=jsonp&dtag=search&KeyWord=" + b + "&PageSize=5&ShowClass=1",dataType: "jsonp",scriptCharset: "utf-8",success: function(h) {
            if (typeof (h) != "object" || h.retCode != "0" || h.data.list.length < 5) {
                return
            }
            var g = '<div class="m m0 paipai-result"><div class="mt"><h2 class="paipai"><i></i>涓烘偍鍦ㄦ媿鎷嶆壘鍒板涓嬬粨鏋�/h2></div>';
            g += '<div class="mc"><div class="paipai-showall"><strong>' + d.util.htmlspecialchars(QUERY_KEYWORD) + "</strong>";
            g += "鍏� + h.data.totalNum + '涓晢鍝�a target="_blank" href="' + a + '" onclick="log(\'paipai\',\'normal-clk-all\',QUERY_KEYWORD)">鏌ョ湅鍏ㄩ儴</a></div><ul class="lh">';
            for (var f = 0, e = h.data.list.length; f < e; f++) {
                var m = h.data.list[f], n = d.util.strip_tags(m.title), l = m.link + (m.link.indexOf("?") > -1 ? "&" : "?") + "PTAG=12468." + c + "." + (f + 1), j = " onclick=\"log('paipai','normal-clk',QUERY_KEYWORD,'" + f + "', '" + m.link + "')\"";
                g += '<li><div class="p-img"><a target="_blank" title="' + n + '" href="' + l + '"' + j + '><img height="130" width="130" alt="" src="' + m.img160 + '"></a></div>';
                g += '<div class="p-name"><a target="_blank" title="' + n + '" href="' + l + '"' + j + ">" + m.title.replace(/<em>(.+?)<\/em>/g, '<font class="skcolor_ljg">$1</font>') + "</a></div>";
                g += '<div class="p-comm"><span class="star sa5"></span><br><a target="_blank" href="' + l + '#salesrecords"' + j + ">(閿�敭鏁伴噺" + m.saleNum + ")</a></div>";
                g += '<div class="p-price"><strong>锟� + m.price + "</strong></div></li>"
            }
            g += "</ul></div></div>";
            $("#bottom_pager").after(g);
            log("paipai", "normal-show", QUERY_KEYWORD, h.data.totalNum, h.data.list.length, window.location.href)
        }})
};
SEARCH.get_adv_info = function(f, d, c, b, e) {
    var g = this, a = encodeURIComponent(window.REAL_KEYWORD || window.QUERY_KEYWORD);
    $.ajax({url: "http://x.jd.com/Search?ad_type=7&ad_ids=291:" + f + ",292:4&keyword=" + a + "&page=" + d + "&urlcid3=" + c,dataType: "jsonp",success: function(s) {
            if (typeof (s) != "object" || !s["291"].length && !s["292"].length) {
                $("#ad_left").html("").hide();
                $("#shop-choice").html("").hide();
                return false
            }
            var p = e == "_3" ? "190" : "160", q = '<li class="fore">';
            q += '<div class="p-img"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},81);JA.tracker.adclick(\'{#monitor_url#}\');"><img width="' + p + '" height="' + p + '" data-img="1" data-lazyload="http://img1{#index#}.360buyimg.com/cms/s' + p + "x" + p + '_{#image_url#}"></a></div>';
            q += '<div class="rate"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},81);JA.tracker.adclick(\'{#monitor_url#}\');">{#ad_title#}</a></div>';
            q += '<div class="p-price"><em></em><strong class="J_{#sku_id#}"></strong></div></li>';
            for (var n = 0, k = s["291"].length, o = "", h = []; n < k; n++) {
                var m = s["291"][n];
                m.pos = n;
                m.index = m.sku_id % 5;
                o += g.util.template(q, m);
                h.push("J_" + m.sku_id);
                new Image().src = m.exposal_url
            }
            if (o) {
                $("#ad_left").html('<div class="mt"><h2>鎺ㄥ箍鍟嗗搧</h2></div><div class="mc"><ul>' + o + "</ul></div>").show()
            } else {
                $("#ad_left").html("").hide()
            }
            if (b == "") {
                var l = '<li><div class="p-img"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},82);JA.tracker.adclick(\'{#monitor_url#}\');"><img width="160" height="160" data-img="1" data-lazyload="http://img1{#index#}.360buyimg.com/cms/s160x160_{#image_url#}"></a></div><div class="p-name"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},82);JA.tracker.adclick(\'{#monitor_url#}\');">{#ad_title#}</a></div><div class="p-price"><em></em><strong class="J_{#sku_id#}"></strong></div></li>'
            } else {
                if (b == "_1") {
                    var l = '<li><div class="p-img"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},82);JA.tracker.adclick(\'{#monitor_url#}\');"><img width="160" height="160" data-img="1" data-lazyload="http://img1{#index#}.360buyimg.com/cms/s160x160_{#image_url#}"></a></div><div class="p-scroll"><a href="javascript:;" class="p-scroll-btn p-scroll-prev">&lt;</a><div class="p-scroll-wrap"><ul><li><a href="javascript:;" class="curr"><img data-img="1" width="27" height="27" data-skuid="{#sku_id#}" data-lazyload="http://img1{#index#}.360buyimg.com/cms/s160x160_{#image_url#}"></a></li></ul></div><a href="javascript:;" class="p-scroll-btn p-scroll-next">&gt;</a></div><div class="p-name"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},82);JA.tracker.adclick(\'{#monitor_url#}\');">{#ad_title#}</a></div><div class="p-price"><strong class="J_{#sku_id#}"></strong></div><div class="extra"><span class="star"><span class="star-white"><span id="adv-star-{#sku_id#}" class="star-yellow h">&nbsp;</span></span></span><a id="adv-comment-{#sku_id#}">宸叉湁浜鸿瘎浠�/a></div></li>'
                } else {
                    if (b == "_2") {
                        var l = '<li><div class="p-img"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},82);JA.tracker.adclick(\'{#monitor_url#}\');"><img width="220" height="220" data-img="1" data-lazyload="http://img1{#index#}.360buyimg.com/cms/s220x220_{#image_url#}"></a></div><div class="p-scroll"><a href="javascript:;" class="p-scroll-btn p-scroll-prev">&lt;</a><div class="p-scroll-wrap"><ul><li><a href="javascript:;" class="curr"><img data-img="1" width="27" height="27" data-skuid="{#sku_id#}" data-lazyload="http://img1{#index#}.360buyimg.com/cms/s220x220_{#image_url#}"></a></li></ul></div><a href="javascript:;" class="p-scroll-btn p-scroll-next">&gt;</a></div><div class="p-name"><a href="{#click_url#}" target="_blank" onclick="searchlog(1,{#sku_id#},{#pos#},82);JA.tracker.adclick(\'{#monitor_url#}\');">{#ad_title#}</a></div><div class="p-price"><strong class="J_{#sku_id#}"></strong></div><div class="extra"><span class="star"><span class="star-white"><span id="adv-star-{#sku_id#}" class="star-yellow h">&nbsp;</span></span></span><a id="adv-comment-{#sku_id#}">宸叉湁浜鸿瘎浠�/a></div></li>'
                    }
                }
            }
            for (var n = 0, k = s["292"].length, o = "", r = []; n < k && k > 3; n++) {
                var m = s["292"][n];
                m.pos = n;
                m.index = m.sku_id % 5;
                o += g.util.template(l, m);
                h.push("J_" + m.sku_id);
                r.push(m.sku_id);
                new Image().src = m.exposal_url
            }
            if (o) {
                $("#shop-choice").html('<div class="mt"><h3>鍟嗗搧绮鹃�</h3></div><div class="mc"><ul class="list-h clearfix">' + o + "</ul></div>").show()
            } else {
                $("#shop-choice").html("").hide()
            }
            pageConfig.FN_ImgError(document);
            $("#ad_left,#shop-choice").find("img[data-lazyload]").Jlazyload({type: "image",placeholderClass: "err-product"});
            h.length && g.get_digital_price(h.join(","), readCookie("ipLoc-djd") || "");
            if (r.length) {
                b != "" && g.get_comment_nums(r.join(","), true);
                b == "_1" && $("#shop-choice").attr("class", "m plist-n7 plist-n2");
                b == "_2" && $("#shop-choice").attr("class", "m plist-n7");
                b == "" && $("#shop-choice").find("li").mouseover(function() {
                    $(this).addClass("hover1")
                }).mouseout(function() {
                    $(this).removeClass("hover1")
                })
            }
        }})
};
SEARCH.init = function(page, total_page, result_count, sort, scroll, shop_id, cid, survey_html, paipai) {
    this.get_ware_info(), this.get_shop_info(shop_id), this.get_multi_shops(), this.bind_events.init(), this.relate_search.init(), this.top_page_html(page, total_page, result_count, scroll), this.bottom_page_html(page, total_page, scroll), this.sort_html(sort), this.image_scroll('#plist li:not([done="1"]) .p-scroll');
    this.get_paipai_ware(paipai);
    $.delayLoad(true, "script/digital_music_download.js?100.js", "utf-8", "", 'li[e-tag!="1"] a.free-download');
    $.ajax({url: "http://x.jd.com/ShowInterface?ad_ids=86:1,62:1," + (window.pageConfig.wideVersion ? 93 : 87) + ":1&urlcid3=" + cid + "&ad_type=8&spread_type=1",dataType: "jsonp",success: function(data) {
            if (typeof (data) != "object") {
                return false
            }
            for (var i in data) {
                if (i == 93 || i == 87) {
                    $("#xjd_bottom").html(data[i][0])
                } else {
                    $("#xjd_left_" + i).html(data[i][0]).parent().parent().show()
                }
            }
        }});
    NotifyPop.init($(".notice-store"));
    pageConfig.isInitContrast = false;
    pageConfig.FN_InitContrast();
    var sidePanle = new pageConfig.FN_InitSidebar();
    sidePanle.addItem(survey_html);
    sidePanle.setTop();
    sidePanle.scroll();
    $("#sidepanel").find("a.gotop").attr("href", "javascript:void(0)").click(function() {
        window.scrollTo(0, 0)
    });
    $.ajax({url: "http://guang.jd.com/init/",dataType: "jsonp",success: function(data) {
            eval(data)
        }})
};
$(document).keyup(function(d) {
    var f = document.activeElement.tagName.toLowerCase();
    if (f == "input" || f == "textarea") {
        return
    }
    var a = 0, d = d || event, c = $("#filter"), b = 0;
    a = d.keyCode || d.which || d.charCode;
    if (c.length) {
        b = c.offset().top
    }
    switch (a) {
        case 37:
            window.scrollTo(0, b);
            $("#top_pagi a.prev").trigger("click");
            break;
        case 39:
            window.scrollTo(0, b);
            $("#top_pagi a.next").trigger("click");
            break;
        default:
            break
    }
});
$(window).scroll(function() {
    var a = $("#scroll_loading");
    if (SEARCH.loading || !SEARCH.page_num || a.length == 0 || a.offset().top - 450 > $(window).height() + $(window).scrollTop()) {
        return false
    }
    SEARCH.scroll()
});
(function(a, b) {
    if (typeof (b.is_correct_hash) == "function") {
        $(a).hashchange(function() {
            var c = b.get_real_hash() || a.location.search.substr(1);
            if (b.is_correct_hash(c)) {
                b.load("s.php?" + c, false)
            }
        })
    }
})(window, SEARCH);
(function() {
    $("#J_oneboxTabs").find("div").click(function() {
        if (!$(this).hasClass("selected")) {
            var a = $("#J_oneboxTabs").find("div").index(this);
            var b = $(".J_oneboxTabsContent").addClass("hide").eq(a).removeClass("hide").find(".J_oneBoxFrame");
            var c = b.attr("data-src");
            if (c) {
                b.removeAttr("data-src").attr("src", c)
            }
            $(this).addClass("selected").siblings().removeClass("selected")
        }
    })
})();
(function() {
    var a = {insertScript: function(f, c) {
            var g = document.getElementsByTagName("head")[0];
            var e = document.createElement("script");
            e.setAttribute("type", "text/javascript");
            if (c) {
                for (var d in c) {
                    if (c.hasOwnProperty(d)) {
                        e.setAttribute(d, c[d])
                    }
                }
            }
            e.setAttribute("src", f);
            g.appendChild(e)
        },insertStyles: function(g) {
            var h = document, f = h.getElementsByTagName("head"), d = h.createElement("style"), e = h.createElement("link");
            if (/\.css$/.test(g)) {
                e.rel = "stylesheet";
                e.type = "text/css";
                e.href = g;
                if (f.length) {
                    f[0].appendChild(e)
                } else {
                    h.documentElement.appendChild(e)
                }
            } else {
                d.setAttribute("type", "text/css");
                if (d.styleSheet) {
                    d.styleSheet.cssText = g
                } else {
                    var c = h.createTextNode(g);
                    d.appendChild(c)
                }
                if (f.length) {
                    f[0].appendChild(d)
                }
            }
        }};
    a.insertStyles("._gemini_inject_label_sousuo{display:block !important;} ._ads_sousuo,._no-ads_sousuo{display:none !important;}");
//    var b = ["2_164_5467", "2_164_5470"];
//    $.ajax({url: "http://nfa.jd.com/loadFa_toJson.js?aid=" + b.join("-") + "&ver=20140526",dataType: "script",cache: true,success: function() {
//            a.insertScript("http://static.360buyimg.com/gemini/gemini/gemini_v2.2.1.js", {id: "1401071931558",name: "gemini_divide_script",charset: "utf-8",divideType: "MODULE_INJECT",param: "[{t:'sousuo'}]"})
//        }})
})();
